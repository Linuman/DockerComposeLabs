
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive collection of Docker Compose hands-on labs for learning and practicing Docker Compose skills.">
      
      
        <meta name="author" content="Nir Geier - nirgeier@gmail.com">
      
      
        <link rel="canonical" href="https://linuman.github.io/DockerComposeLabs/print_page/">
      
      
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Print Site - DockerComposeLabs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/theme.css">
    
    <script>__md_scope=new URL("/DockerComposeLabs/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine classes -->





<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">

    <!-- Link to home -->
    <a href=".." title="DockerComposeLabs"
      class="md-header__button md-logo" aria-label="DockerComposeLabs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DockerComposeLabs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
            Print Site
            
          </span>
        </div>
      </div>
    </div>

    <div class="m-social__top">
      <!-- Social links -->
      
      
<div class="md-social">
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs" target="_blank" rel="noopener" title="View on GitHub"
        class="md-social__link social-class__github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs/network/members" target="_blank" rel="noopener" title="Fork this repo"
        class="md-social__link social-class__fork">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg>
    </a>
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs/stargazers" target="_blank" rel="noopener" title="Star this repo"
        class="md-social__link social-class__star">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener" title="Connect on LinkedIn"
        class="md-social__link social-class__linkedin">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://discord.gg/U6xW23Ss" target="_blank" rel="noopener" title="Follow me on Discord"
        class="md-social__link social-class__discord">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
    
    
    
    
    
    <a href="https://stackoverflow.com/users/1755598/codewizard" target="_blank" rel="noopener" title="Follow me on Stack Overflow"
        class="md-social__link social-class__stackoverflow">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://wa.me/972548122310" target="_blank" rel="noopener" title="Follow me on WhatsApp"
        class="md-social__link social-class__whatsapp">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg>
    </a>
    
    
    
    
    
    <a href="mailto:nirg@codewizard.co.il" target="_blank" rel="noopener" title="Email me"
        class="md-social__link social-class__email">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
    
</div>
      
    </div>

    <!-- Color palette toggle -->
    
    
    <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
    
    

    <!-- User preference: color palette -->
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
    

    <!-- Check if search is actually enabled - see https://t.ly/DT_0V -->
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
    </label>

    <!-- Search interface -->
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    

    <!-- Repository information -->
    
    <div class="md-header__source">
      <a href="https://github.com/Linuman/DockerComposeLabs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Linuman/DockerComposeLabs
  </div>
</a>
    </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
  
  
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Start Here

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
    
  
  Labs

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
  
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DockerComposeLabs" class="md-nav__button md-logo" aria-label="DockerComposeLabs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    DockerComposeLabs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Linuman/DockerComposeLabs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Linuman/DockerComposeLabs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Start Here
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href=".." class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Labs
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index" heading-number="1"><h1 id="index-docker-compose-labs-overview">Docker Compose Labs Overview<a class="headerlink" href="#index-docker-compose-labs-overview" title="Permanent link">&para;</a></h1>
<hr />
<h3 id="index-preface">Preface<a class="headerlink" href="#index-preface" title="Permanent link">&para;</a></h3>
<ul>
<li><code>Docker Compose</code> is a tool for defining and running multi-container <code>Docker</code> applications</li>
<li>With <code>Docker Compose</code>, you use a <code>YAML</code> file to configure your application&rsquo;s services</li>
<li>Then, with a single command, you can create and start all the services from your configuration</li>
<li><code>Docker Compose</code> simplifies the development, testing, and deployment of complex applications</li>
</ul>
<hr />
<h2 id="index-docker-compose-overview">Docker Compose Overview<a class="headerlink" href="#index-docker-compose-overview" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker Compose</code> allows you to <strong>define multiple services</strong> in a single <code>YAML</code> file</li>
<li>Services can be <strong>linked together</strong> through networks and dependencies</li>
<li><code>Docker Compose</code> manages the <strong>entire application lifecycle</strong></li>
</ul>
<hr />
<h3 id="index-key-benefits">Key Benefits<a class="headerlink" href="#index-key-benefits" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Simplified Multi-Container Management</strong>: Define and run multiple containers with a single command</li>
<li><strong>Environment Consistency</strong>: Ensure the same environment across development, testing and production</li>
<li><strong>Service Dependencies</strong>: Control the startup order and dependencies between services</li>
<li><strong>Network Isolation</strong>: Create isolated networks for your application components</li>
<li><strong>Volume Management</strong>: Persist data and share files between containers and the host</li>
</ul>
<hr />
<h3 id="index-docker-compose-file-structure">Docker Compose File Structure<a class="headerlink" href="#index-docker-compose-file-structure" title="Permanent link">&para;</a></h3>
<ul>
<li>A <code>docker-compose.yml</code> file defines your application&rsquo;s services, networks, and volumes</li>
<li><strong>Services</strong>: Define the containers that make up your application</li>
<li><strong>Networks</strong>: Create custom networks for service communication</li>
<li><strong>Volumes</strong>: Manage data persistence and sharing</li>
</ul>
<h3 id="index-core-concepts">Core Concepts<a class="headerlink" href="#index-core-concepts" title="Permanent link">&para;</a></h3>
<h4 id="index-version"><code>version</code><a class="headerlink" href="#index-version" title="Permanent link">&para;</a></h4>
<ul>
<li>Specifies the Compose file format version</li>
<li>Different versions support different features</li>
<li>Latest version provides the most features and compatibility</li>
</ul>
<h4 id="index-services"><code>services</code><a class="headerlink" href="#index-services" title="Permanent link">&para;</a></h4>
<ul>
<li>The main section where you define your application containers</li>
<li>Each service represents a single container</li>
<li>Services can be built from <code>Dockerfiles</code> or use existing images</li>
</ul>
<h4 id="index-networks"><code>networks</code><a class="headerlink" href="#index-networks" title="Permanent link">&para;</a></h4>
<ul>
<li>Define custom networks for service communication</li>
<li>Services on the same network can communicate using service names</li>
<li>Provides isolation between different application components</li>
</ul>
<h4 id="index-volumes"><code>volumes</code><a class="headerlink" href="#index-volumes" title="Permanent link">&para;</a></h4>
<ul>
<li>Define named volumes for data persistence</li>
<li>Share data between containers</li>
<li>Persist data beyond container lifecycle</li>
</ul>
<hr />
<h2 id="index-available-labs">ðŸ“š Available Labs<a class="headerlink" href="#index-available-labs" title="Permanent link">&para;</a></h2>
<h3 id="index-001-introduction"><a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a><a class="headerlink" href="#index-001-introduction" title="Permanent link">&para;</a></h3>
<p><strong>Introduction to <code>Docker Compose</code></strong></p>
<p>This lab provides a comprehensive introduction to <code>Docker Compose</code>, a tool for defining and running multi-container Docker applications. You will learn the fundamentals of <code>Docker Compose</code> and how to set it up on different operating systems.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>What <code>Docker Compose</code> is, and what are its benefits</li>
<li>How to install <code>Docker Compose</code> on different platforms</li>
<li>Basic concepts of multi-container orchestration</li>
</ul>
<h3 id="index-002-compose-demo"><a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose Demo</a><a class="headerlink" href="#index-002-compose-demo" title="Permanent link">&para;</a></h3>
<p><strong>Multi-Container Application Demo</strong></p>
<p>This lab demonstrates a practical <code>Docker Compose</code> example with a multi-container application. You will explore a complete <code>docker-compose-sample.yml</code> file that defines three inter-connected services:</p>
<ol>
<li>a web server</li>
<li>an application</li>
<li>a database</li>
</ol>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Basic <code>docker-compose.yml</code> file structure</li>
<li>Multi-service application configuration</li>
<li>Web server, application, and database integration</li>
</ul>
<h3 id="index-003-structure"><a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a><a class="headerlink" href="#index-003-structure" title="Permanent link">&para;</a></h3>
<p><strong>Complete <code>Docker Compose</code> Structure Guide</strong></p>
<p>This comprehensive lab covers the complete structure and syntax of <code>Docker Compose</code> files. You will learn about all the major configuration options, from basic service definitions to advanced features like: health checks, networks and volumes.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Detailed <code>docker-compose.yml</code> structure</li>
<li>Common service configurations</li>
<li>Best practices for service definition</li>
</ul>
<h3 id="index-004-commands"><a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a><a class="headerlink" href="#index-004-commands" title="Permanent link">&para;</a></h3>
<p><strong>Essential <code>Docker Compose</code> CLI (Command Line Interface) Reference</strong></p>
<p>This lab provides a comprehensive guide to the <code>Docker Compose</code> command-line interface. You will master all the essential commands needed to manage multi-container applications effectively, from basic startup and shutdown to advanced debugging and maintenance operations.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Essential <code>Docker Compose</code> commands</li>
<li>Managing application lifecycle</li>
<li>Debugging and troubleshooting</li>
</ul>
<h3 id="index-005-compose-to-helm"><a href="#dockercomposelabs-005-compose-2helm" target="_blank">005 - Compose to Helm</a><a class="headerlink" href="#index-005-compose-to-helm" title="Permanent link">&para;</a></h3>
<p><strong>Creating and Using Helm Charts</strong></p>
<p>Helm is a powerful package manager for Kubernetes that simplifies the deployment and management of applications. This lab will walk you through the process of creating and using a Helm chart as well as converting <code>Docker Compose</code> configurations to Kubernetes deployments.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Converting <code>Docker Compose</code> to Helm charts</li>
<li>Kubernetes deployment strategies</li>
<li>Migration from development to production</li>
</ul>
<h3 id="index-006-compose-advanced"><a href="#dockercomposelabs-006-compose-advanced" target="_blank">006 - Compose Advanced</a><a class="headerlink" href="#index-006-compose-advanced" title="Permanent link">&para;</a></h3>
<p><strong>Advanced <code>Docker Compose</code> Configuration</strong></p>
<p>This lab demonstrates advanced <code>Docker Compose</code> features, including the <code>extends</code> functionality, <code>YAML anchors</code>, and modular service definitions for a complete monitoring stack with <code>Grafana</code>, <code>Loki</code>, <code>Prometheus</code> and more.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Advanced <code>Docker Compose</code> features</li>
<li>Complex service configurations</li>
<li>Production-ready setups with monitoring</li>
</ul>
<h3 id="index-007-watch"><a href="#dockercomposelabs-007-watch" target="_blank">007 - Watch</a><a class="headerlink" href="#index-007-watch" title="Permanent link">&para;</a></h3>
<p><strong><code>Docker Compose</code> Watch Feature</strong></p>
<p><code>Docker Compose Watch</code> is a powerful tool for monitoring changes in your <code>Docker Compose</code> setup and automatically rebuilding or restarting services when changes are detected. This lab demonstrates how to implement and use <code>Docker Compose Watch</code> for streamlined development workflows.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li><code>Docker Compose Watch</code> feature</li>
<li>Live reload and development workflows</li>
<li>File synchronization and hot reloading</li>
</ul>
<h3 id="index-008-networks"><a href="#dockercomposelabs-008-networks" target="_blank">008 - Networks</a><a class="headerlink" href="#index-008-networks" title="Permanent link">&para;</a></h3>
<p><strong>Multi-Network Architecture</strong></p>
<p>This lab showcases a production-like microservices architecture with proper network segmentation, security boundaries, and service isolation. The example includes 8 different networks, each serving specific purposes and demonstrating various networking patterns used in enterprise applications.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Advanced multi-network architecture</li>
<li>Network segmentation and security</li>
<li>Service discovery and isolation patterns</li>
<li>DMZ and monitoring network configurations</li>
</ul>
<hr />
<h2 id="index-additional-features">Additional Features<a class="headerlink" href="#index-additional-features" title="Permanent link">&para;</a></h2>
<h3 id="index-docker-compose-watch">Docker Compose Watch<a class="headerlink" href="#index-docker-compose-watch" title="Permanent link">&para;</a></h3>
<ul>
<li>Automatic file synchronization</li>
<li>Live reload capabilities</li>
<li>Enhanced development experience</li>
<li>Real-time updates without rebuilding</li>
</ul>
<h3 id="index-service-orchestration">Service Orchestration<a class="headerlink" href="#index-service-orchestration" title="Permanent link">&para;</a></h3>
<ul>
<li>Health checks and dependency management</li>
<li>Scaling services up or down</li>
<li>Load balancing and service discovery</li>
<li>Rolling updates and zero-downtime deployments</li>
</ul>
<h3 id="index-production-considerations">Production Considerations<a class="headerlink" href="#index-production-considerations" title="Permanent link">&para;</a></h3>
<ul>
<li>Security best practices</li>
<li>Performance optimization</li>
<li>Monitoring and logging</li>
<li>Backup and recovery strategies</li>
</ul>
<hr />
<h2 id="index-getting-started">ðŸš€ Getting Started<a class="headerlink" href="#index-getting-started" title="Permanent link">&para;</a></h2>
<p>Each lab is self-contained and includes:</p>
<ul>
<li>Hands-on exercises
 Start with <a href="#dockercomposelabs-labs-index.md" target="_blank"><strong>Start Here</strong></a></li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and Docker Compose are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<h2 id="index-resources">Resources<a class="headerlink" href="#index-resources" title="Permanent link">&para;</a></h2>
<p>The <code>resources</code> directory contains:</p>
<ul>
<li>Configuration files for various services</li>
<li>Sample YAML files for different scenarios</li>
<li>Supporting materials and documentation</li>
<li>Server application examples</li>
</ul>
<hr />
<h2 id="index-support">Support<a class="headerlink" href="#index-support" title="Permanent link">&para;</a></h2>
<ul>
<li>Each lab is self-contained with detailed explanations</li>
<li>Common issues and solutions are documented</li>
<li>Best practices and tips are included throughout</li>
<li>Real-world examples and use cases provided</li>
</ul>
<h2 id="index-documentaion-and-reference">ðŸ“– Documentaion and reference<a class="headerlink" href="#index-documentaion-and-reference" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.docker.com/compose/" target="_blank">Docker Compose Documentation</a></li>
<li><a href="https://hub.docker.com/" target="_blank">Docker Hub</a></li>
<li><a href="https://kubernetes.io/docs/" target="_blank">Kubernetes Documentation</a></li>
</ul>
<hr />
<p><strong>Happy Learning!</strong>
<br /><br />
<img src="../assets/images/docker-compose-icon.png" alt="Docker Compose Octopus" width="400" height="400" style="background:transparent; display:block; margin: 2rem auto; box-shadow:none; border:none;" /></p>
<p><img alt="Visitor Badge" src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" /></p></section>
                    <section class='print-page md-section' id='section-2' heading-number='2'>
                        <h1>Labs<a class='headerlink' href='#section-2' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="index" heading-number="2.1"><h1 id="index-docker-compose-labs-overview">Docker Compose Labs Overview<a class="headerlink" href="#index-docker-compose-labs-overview" title="Permanent link">&para;</a></h1>
<hr />
<h3 id="index-preface">Preface<a class="headerlink" href="#index-preface" title="Permanent link">&para;</a></h3>
<ul>
<li><code>Docker Compose</code> is a tool for defining and running multi-container <code>Docker</code> applications</li>
<li>With <code>Docker Compose</code>, you use a <code>YAML</code> file to configure your application&rsquo;s services</li>
<li>Then, with a single command, you can create and start all the services from your configuration</li>
<li><code>Docker Compose</code> simplifies the development, testing, and deployment of complex applications</li>
</ul>
<hr />
<h2 id="index-docker-compose-overview">Docker Compose Overview<a class="headerlink" href="#index-docker-compose-overview" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker Compose</code> allows you to <strong>define multiple services</strong> in a single <code>YAML</code> file</li>
<li>Services can be <strong>linked together</strong> through networks and dependencies</li>
<li><code>Docker Compose</code> manages the <strong>entire application lifecycle</strong></li>
</ul>
<hr />
<h3 id="index-key-benefits">Key Benefits<a class="headerlink" href="#index-key-benefits" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Simplified Multi-Container Management</strong>: Define and run multiple containers with a single command</li>
<li><strong>Environment Consistency</strong>: Ensure the same environment across development, testing and production</li>
<li><strong>Service Dependencies</strong>: Control the startup order and dependencies between services</li>
<li><strong>Network Isolation</strong>: Create isolated networks for your application components</li>
<li><strong>Volume Management</strong>: Persist data and share files between containers and the host</li>
</ul>
<hr />
<h3 id="index-docker-compose-file-structure">Docker Compose File Structure<a class="headerlink" href="#index-docker-compose-file-structure" title="Permanent link">&para;</a></h3>
<ul>
<li>A <code>docker-compose.yml</code> file defines your application&rsquo;s services, networks, and volumes</li>
<li><strong>Services</strong>: Define the containers that make up your application</li>
<li><strong>Networks</strong>: Create custom networks for service communication</li>
<li><strong>Volumes</strong>: Manage data persistence and sharing</li>
</ul>
<h3 id="index-core-concepts">Core Concepts<a class="headerlink" href="#index-core-concepts" title="Permanent link">&para;</a></h3>
<h4 id="index-version"><code>version</code><a class="headerlink" href="#index-version" title="Permanent link">&para;</a></h4>
<ul>
<li>Specifies the Compose file format version</li>
<li>Different versions support different features</li>
<li>Latest version provides the most features and compatibility</li>
</ul>
<h4 id="index-services"><code>services</code><a class="headerlink" href="#index-services" title="Permanent link">&para;</a></h4>
<ul>
<li>The main section where you define your application containers</li>
<li>Each service represents a single container</li>
<li>Services can be built from <code>Dockerfiles</code> or use existing images</li>
</ul>
<h4 id="index-networks"><code>networks</code><a class="headerlink" href="#index-networks" title="Permanent link">&para;</a></h4>
<ul>
<li>Define custom networks for service communication</li>
<li>Services on the same network can communicate using service names</li>
<li>Provides isolation between different application components</li>
</ul>
<h4 id="index-volumes"><code>volumes</code><a class="headerlink" href="#index-volumes" title="Permanent link">&para;</a></h4>
<ul>
<li>Define named volumes for data persistence</li>
<li>Share data between containers</li>
<li>Persist data beyond container lifecycle</li>
</ul>
<hr />
<h2 id="index-available-labs">ðŸ“š Available Labs<a class="headerlink" href="#index-available-labs" title="Permanent link">&para;</a></h2>
<h3 id="index-001-introduction"><a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a><a class="headerlink" href="#index-001-introduction" title="Permanent link">&para;</a></h3>
<p><strong>Introduction to <code>Docker Compose</code></strong></p>
<p>This lab provides a comprehensive introduction to <code>Docker Compose</code>, a tool for defining and running multi-container Docker applications. You will learn the fundamentals of <code>Docker Compose</code> and how to set it up on different operating systems.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>What <code>Docker Compose</code> is, and what are its benefits</li>
<li>How to install <code>Docker Compose</code> on different platforms</li>
<li>Basic concepts of multi-container orchestration</li>
</ul>
<h3 id="index-002-compose-demo"><a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose Demo</a><a class="headerlink" href="#index-002-compose-demo" title="Permanent link">&para;</a></h3>
<p><strong>Multi-Container Application Demo</strong></p>
<p>This lab demonstrates a practical <code>Docker Compose</code> example with a multi-container application. You will explore a complete <code>docker-compose-sample.yml</code> file that defines three inter-connected services:</p>
<ol>
<li>a web server</li>
<li>an application</li>
<li>a database</li>
</ol>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Basic <code>docker-compose.yml</code> file structure</li>
<li>Multi-service application configuration</li>
<li>Web server, application, and database integration</li>
</ul>
<h3 id="index-003-structure"><a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a><a class="headerlink" href="#index-003-structure" title="Permanent link">&para;</a></h3>
<p><strong>Complete <code>Docker Compose</code> Structure Guide</strong></p>
<p>This comprehensive lab covers the complete structure and syntax of <code>Docker Compose</code> files. You will learn about all the major configuration options, from basic service definitions to advanced features like: health checks, networks and volumes.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Detailed <code>docker-compose.yml</code> structure</li>
<li>Common service configurations</li>
<li>Best practices for service definition</li>
</ul>
<h3 id="index-004-commands"><a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a><a class="headerlink" href="#index-004-commands" title="Permanent link">&para;</a></h3>
<p><strong>Essential <code>Docker Compose</code> CLI (Command Line Interface) Reference</strong></p>
<p>This lab provides a comprehensive guide to the <code>Docker Compose</code> command-line interface. You will master all the essential commands needed to manage multi-container applications effectively, from basic startup and shutdown to advanced debugging and maintenance operations.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Essential <code>Docker Compose</code> commands</li>
<li>Managing application lifecycle</li>
<li>Debugging and troubleshooting</li>
</ul>
<h3 id="index-005-compose-to-helm"><a href="#dockercomposelabs-005-compose-2helm" target="_blank">005 - Compose to Helm</a><a class="headerlink" href="#index-005-compose-to-helm" title="Permanent link">&para;</a></h3>
<p><strong>Creating and Using Helm Charts</strong></p>
<p>Helm is a powerful package manager for Kubernetes that simplifies the deployment and management of applications. This lab will walk you through the process of creating and using a Helm chart as well as converting <code>Docker Compose</code> configurations to Kubernetes deployments.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Converting <code>Docker Compose</code> to Helm charts</li>
<li>Kubernetes deployment strategies</li>
<li>Migration from development to production</li>
</ul>
<h3 id="index-006-compose-advanced"><a href="#dockercomposelabs-006-compose-advanced" target="_blank">006 - Compose Advanced</a><a class="headerlink" href="#index-006-compose-advanced" title="Permanent link">&para;</a></h3>
<p><strong>Advanced <code>Docker Compose</code> Configuration</strong></p>
<p>This lab demonstrates advanced <code>Docker Compose</code> features, including the <code>extends</code> functionality, <code>YAML anchors</code>, and modular service definitions for a complete monitoring stack with <code>Grafana</code>, <code>Loki</code>, <code>Prometheus</code> and more.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Advanced <code>Docker Compose</code> features</li>
<li>Complex service configurations</li>
<li>Production-ready setups with monitoring</li>
</ul>
<h3 id="index-007-watch"><a href="#dockercomposelabs-007-watch" target="_blank">007 - Watch</a><a class="headerlink" href="#index-007-watch" title="Permanent link">&para;</a></h3>
<p><strong><code>Docker Compose</code> Watch Feature</strong></p>
<p><code>Docker Compose Watch</code> is a powerful tool for monitoring changes in your <code>Docker Compose</code> setup and automatically rebuilding or restarting services when changes are detected. This lab demonstrates how to implement and use <code>Docker Compose Watch</code> for streamlined development workflows.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li><code>Docker Compose Watch</code> feature</li>
<li>Live reload and development workflows</li>
<li>File synchronization and hot reloading</li>
</ul>
<h3 id="index-008-networks"><a href="#dockercomposelabs-008-networks" target="_blank">008 - Networks</a><a class="headerlink" href="#index-008-networks" title="Permanent link">&para;</a></h3>
<p><strong>Multi-Network Architecture</strong></p>
<p>This lab showcases a production-like microservices architecture with proper network segmentation, security boundaries, and service isolation. The example includes 8 different networks, each serving specific purposes and demonstrating various networking patterns used in enterprise applications.</p>
<p><strong>What You will Learn:</strong></p>
<ul>
<li>Advanced multi-network architecture</li>
<li>Network segmentation and security</li>
<li>Service discovery and isolation patterns</li>
<li>DMZ and monitoring network configurations</li>
</ul>
<hr />
<h2 id="index-additional-features">Additional Features<a class="headerlink" href="#index-additional-features" title="Permanent link">&para;</a></h2>
<h3 id="index-docker-compose-watch">Docker Compose Watch<a class="headerlink" href="#index-docker-compose-watch" title="Permanent link">&para;</a></h3>
<ul>
<li>Automatic file synchronization</li>
<li>Live reload capabilities</li>
<li>Enhanced development experience</li>
<li>Real-time updates without rebuilding</li>
</ul>
<h3 id="index-service-orchestration">Service Orchestration<a class="headerlink" href="#index-service-orchestration" title="Permanent link">&para;</a></h3>
<ul>
<li>Health checks and dependency management</li>
<li>Scaling services up or down</li>
<li>Load balancing and service discovery</li>
<li>Rolling updates and zero-downtime deployments</li>
</ul>
<h3 id="index-production-considerations">Production Considerations<a class="headerlink" href="#index-production-considerations" title="Permanent link">&para;</a></h3>
<ul>
<li>Security best practices</li>
<li>Performance optimization</li>
<li>Monitoring and logging</li>
<li>Backup and recovery strategies</li>
</ul>
<hr />
<h2 id="index-getting-started">ðŸš€ Getting Started<a class="headerlink" href="#index-getting-started" title="Permanent link">&para;</a></h2>
<p>Each lab is self-contained and includes:</p>
<ul>
<li>Hands-on exercises
 Start with <a href="#dockercomposelabs-labs-index.md" target="_blank"><strong>Start Here</strong></a></li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and Docker Compose are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<h2 id="index-resources">Resources<a class="headerlink" href="#index-resources" title="Permanent link">&para;</a></h2>
<p>The <code>resources</code> directory contains:</p>
<ul>
<li>Configuration files for various services</li>
<li>Sample YAML files for different scenarios</li>
<li>Supporting materials and documentation</li>
<li>Server application examples</li>
</ul>
<hr />
<h2 id="index-support">Support<a class="headerlink" href="#index-support" title="Permanent link">&para;</a></h2>
<ul>
<li>Each lab is self-contained with detailed explanations</li>
<li>Common issues and solutions are documented</li>
<li>Best practices and tips are included throughout</li>
<li>Real-world examples and use cases provided</li>
</ul>
<h2 id="index-documentaion-and-reference">ðŸ“– Documentaion and reference<a class="headerlink" href="#index-documentaion-and-reference" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.docker.com/compose/" target="_blank">Docker Compose Documentation</a></li>
<li><a href="https://hub.docker.com/" target="_blank">Docker Hub</a></li>
<li><a href="https://kubernetes.io/docs/" target="_blank">Kubernetes Documentation</a></li>
</ul>
<hr />
<p><strong>Happy Learning!</strong>
<br /><br />
<img src="../assets/images/docker-compose-icon.png" alt="Docker Compose Octopus" width="400" height="400" style="background:transparent; display:block; margin: 2rem auto; box-shadow:none; border:none;" /></p>
<p><img alt="Visitor Badge" src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" /></p></section><section class="print-page" id="001-intro" heading-number="2.2"><h1 id="001-intro-docker-compose-introduction">Docker Compose Introduction<a class="headerlink" href="#001-intro-docker-compose-introduction" title="Permanent link">&para;</a></h1>
<hr />
<h2 id="001-intro-description">Description<a class="headerlink" href="#001-intro-description" title="Permanent link">&para;</a></h2>
<ul>
<li>This lab provides a comprehensive introduction to <code>Docker Compose</code>, a tool for defining and running multi-container Docker applications.</li>
<li>You will learn the fundamentals of <code>Docker Compose</code> and how to set it up on different operating systems.</li>
</ul>
<hr />
<h2 id="001-intro-prerequisites">Prerequisites<a class="headerlink" href="#001-intro-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Basic understanding of Docker concepts</li>
<li>Docker installed on your system</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and Docker Compose are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<h2 id="001-intro-what-you-will-learn">What You will Learn<a class="headerlink" href="#001-intro-what-you-will-learn" title="Permanent link">&para;</a></h2>
<ul>
<li>What <code>Docker Compose</code> is and what are its benefits</li>
<li>How to install <code>Docker Compose</code> on different platforms</li>
<li>Basic concepts of multi-container orchestration</li>
</ul>
<hr />
<h2 id="001-intro-labs-achievements">Lab&rsquo;s achievements<a class="headerlink" href="#001-intro-labs-achievements" title="Permanent link">&para;</a></h2>
<p>After completing this lab, you will be ready to:</p>
<ul>
<li>Create your first docker-compose.yml file</li>
<li>Understand service definitions</li>
<li>Manage multi-container applications</li>
<li>Move on to more advanced <code>Docker Compose</code> features</li>
</ul>
<hr />
<h2 id="001-intro-key-concepts-covered">Key Concepts Covered<a class="headerlink" href="#001-intro-key-concepts-covered" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Multi-container Applications</strong>: Understanding how <code>Docker Compose</code> simplifies managing multiple containers</li>
<li><strong>YAML Configuration</strong>: Introduction to the <code>docker-compose.yml</code> file structure</li>
<li><strong>Service Orchestration</strong>: How containers work together in a composed application</li>
<li><strong>Development Workflow</strong>: Using <code>Docker Compose</code> for local development environments</li>
</ul>
<hr />
<h2 id="001-intro-installation-methods">Installation Methods<a class="headerlink" href="#001-intro-installation-methods" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Docker Desktop</strong> (on Windows or macOS): Included by default within Docker Desktop software</li>
<li><strong>Linux Package Managers</strong>: Using apt-get / yum / dnf etc. (linux flavor dependent)</li>
<li><strong>Manual Installation</strong>: Downloading from GitHub releases</li>
<li><strong>Homebrew</strong> (macOS) / <strong>Winget</strong> (Windows): Using the brew or winget package managers</li>
</ol>
<hr />
<h2 id="001-intro-01-what-is-docker-compose">01. What is <code>Docker Compose</code>?<a class="headerlink" href="#001-intro-01-what-is-docker-compose" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker Compose</code> is a tool for defining and running multi-container <code>Docker</code> applications.</li>
<li>With <code>Docker Compose</code>, you use a <code>YAML</code> file to configure your application&rsquo;s services.</li>
<li>Then, with a simple command(s), you can create and start all the services from your configuration.</li>
<li>This greatly simplifies the development, testing, and deployment of complex applications.</li>
<li>It allows you to define the services, networks, and volumes your application needs in a single file (<code>docker-compose.yml</code>), making it easy to manage and share your application setup.</li>
<li><code>Docker Compose</code> is particularly useful for local development, <code>CI/CD pipelines</code>, and orchestrating <strong>multi-container</strong> applications.</li>
</ul>
<hr />
<h2 id="001-intro-02-installing-docker-compose">02. Installing Docker Compose<a class="headerlink" href="#001-intro-02-installing-docker-compose" title="Permanent link">&para;</a></h2>
<p><br> </p>
<h3 id="001-intro-docker-desktop-for-windows-and-macos">&ndash; Docker Desktop for Windows and macOS<a class="headerlink" href="#001-intro-docker-desktop-for-windows-and-macos" title="Permanent link">&para;</a></h3>
<ul>
<li>If you are using <code>Docker Desktop</code> for Windows or macOS, <code>Docker Compose</code> is included in the bundle by default.</li>
</ul>
<h3 id="001-intro-linux">&ndash; Linux<a class="headerlink" href="#001-intro-linux" title="Permanent link">&para;</a></h3>
<ul>
<li>If you are using Linux, you might need to install it separately.</li>
<li>Please refer to the <a href="https://docs.docker.com/compose/install/">official Docker documentation</a> for installation instructions.</li>
<li>You can install it using the official <code>Docker Compose</code> package for your Linux distribution.</li>
<li>For example, on Ubuntu, you can run:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#001-intro-__codelineno-0-1"></a><span class="c1"># Install `Docker Compose` using apt-get</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#001-intro-__codelineno-0-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>docker-compose
</span></code></pre></div>
<ul>
<li>Or, if you prefer to install it manually, you can download the binary from the official GitHub repository:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#001-intro-__codelineno-1-1"></a><span class="c1"># Install from GitHub repository and move it to /usr/local/bin</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#001-intro-__codelineno-1-2"></a>sudo<span class="w"> </span>curl<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-</span><span class="k">$(</span>uname<span class="w"> </span>-s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname<span class="w"> </span>-m<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span>/usr/local/bin/docker-compose
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#001-intro-__codelineno-1-3"></a>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/docker-compose
</span></code></pre></div>
<ul>
<li>Verify your installation by running:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#001-intro-__codelineno-2-1"></a><span class="c1"># Verify `Docker Compose` installation</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#001-intro-__codelineno-2-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>version
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#001-intro-__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#001-intro-__codelineno-2-4"></a><span class="c1"># For older versions</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#001-intro-__codelineno-2-5"></a>docker-compose<span class="w"> </span>--version
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#001-intro-__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#001-intro-__codelineno-2-7"></a><span class="c1"># Or if using macos and installing using brew</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#001-intro-__codelineno-2-8"></a>brew<span class="w"> </span>info<span class="w"> </span>docker-compose
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#001-intro-__codelineno-2-9"></a>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#001-intro-__codelineno-2-10"></a><span class="c1">### Output</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#001-intro-__codelineno-2-11"></a>Isolated<span class="w"> </span>development<span class="w"> </span>environments<span class="w"> </span>using<span class="w"> </span>Docker
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#001-intro-__codelineno-2-12"></a>https://docs.docker.com/compose/
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#001-intro-__codelineno-2-13"></a>Installed
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#001-intro-__codelineno-2-14"></a>/opt/homebrew/Cellar/docker-compose/2.36.0<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="w"> </span>files,<span class="w"> </span><span class="m">59</span>.7MB<span class="o">)</span><span class="w"> </span>*
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#001-intro-__codelineno-2-15"></a>Poured<span class="w"> </span>from<span class="w"> </span>bottle<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>formulae.brew.sh<span class="w"> </span>API<span class="w"> </span>on<span class="w"> </span><span class="m">2025</span>-05-08<span class="w"> </span>at<span class="w"> </span><span class="m">11</span>:23:08
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#001-intro-__codelineno-2-16"></a>From:<span class="w"> </span>https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/d/docker-compose.rb
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#001-intro-__codelineno-2-17"></a>License:<span class="w"> </span>Apache-2.0
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#001-intro-__codelineno-2-18"></a><span class="o">==</span>&gt;<span class="w"> </span>Dependencies
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#001-intro-__codelineno-2-19"></a>Build:<span class="w"> </span>go<span class="w"> </span>âœ˜
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#001-intro-__codelineno-2-20"></a><span class="o">==</span>&gt;<span class="w"> </span>Options
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#001-intro-__codelineno-2-21"></a>--HEAD
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#001-intro-__codelineno-2-22"></a>Install<span class="w"> </span>HEAD<span class="w"> </span><span class="nv">version</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#001-intro-__codelineno-2-23"></a><span class="o">==</span>&gt;<span class="w"> </span>Caveats
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#001-intro-__codelineno-2-24"></a>Compose<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>Docker<span class="w"> </span>plugin.<span class="w"> </span>For<span class="w"> </span>Docker<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>the<span class="w"> </span>plugin,<span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;cliPluginsExtraDirs&quot;</span><span class="w"> </span>to<span class="w"> </span>~/.docker/config.json:
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#001-intro-__codelineno-2-25"></a><span class="s2">&quot;cliPluginsExtraDirs&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#001-intro-__codelineno-2-26"></a><span class="w">    </span><span class="s2">&quot;/opt/homebrew/lib/docker/cli-plugins&quot;</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#001-intro-__codelineno-2-27"></a><span class="o">]</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#001-intro-__codelineno-2-28"></a><span class="o">==</span>&gt;<span class="w"> </span>Analytics
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#001-intro-__codelineno-2-29"></a>install-on-request:<span class="w"> </span><span class="m">28</span>,379<span class="w"> </span><span class="o">(</span><span class="m">30</span><span class="w"> </span>days<span class="o">)</span>,<span class="w"> </span><span class="m">85</span>,181<span class="w"> </span><span class="o">(</span><span class="m">90</span><span class="w"> </span>days<span class="o">)</span>,<span class="w"> </span><span class="m">325</span>,794<span class="w"> </span><span class="o">(</span><span class="m">365</span><span class="w"> </span>days<span class="o">)</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#001-intro-__codelineno-2-30"></a>build-error:<span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="o">(</span><span class="m">30</span><span class="w"> </span>days<span class="o">)</span>
</span></code></pre></div>
<h3 id="001-intro-macos-using-homebrew">&ndash; macOS using Homebrew<a class="headerlink" href="#001-intro-macos-using-homebrew" title="Permanent link">&para;</a></h3>
<ul>
<li>If you are using macOS, you can install <code>Docker Compose</code> using Homebrew:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#001-intro-__codelineno-3-1"></a><span class="c1"># Install `Docker Compose` using Homebrew</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#001-intro-__codelineno-3-2"></a>brew<span class="w"> </span>install<span class="w"> </span>docker-compose
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#001-intro-__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#001-intro-__codelineno-3-4"></a><span class="c1"># After installation, you can verify it by running:</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#001-intro-__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#001-intro-__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#001-intro-__codelineno-3-7"></a><span class="c1"># Verify `Docker Compose` installation</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#001-intro-__codelineno-3-8"></a>docker<span class="w"> </span>compose<span class="w"> </span>version<span class="w">  </span>
</span></code></pre></div></section><section class="print-page" id="002-compose-demo" heading-number="2.3"><h1 id="002-compose-demo-docker-compose-demo-multi-container-application">Docker Compose Demo - Multi-Container Application<a class="headerlink" href="#002-compose-demo-docker-compose-demo-multi-container-application" title="Permanent link">&para;</a></h1>
<p><dv></p>
<h2 id="002-compose-demo-description">Description<a class="headerlink" href="#002-compose-demo-description" title="Permanent link">&para;</a></h2>
<p>This lab demonstrates a practical <code>Docker Compose</code> example with a multi-container application. You will explore a complete <code>docker-compose-sample.yml</code> file that defines three inter-connected services:</p>
<ul>
<li>a web server </li>
<li>an application</li>
<li>a database</li>
</ul>
<hr />
<h2 id="002-compose-demo-prerequisites">Prerequisites<a class="headerlink" href="#002-compose-demo-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker</code> and <code>Docker Compose</code> installed</li>
<li>Basic understanding of <code>Docker</code> concepts</li>
<li>Completion of the previous lab <a href="#001-intro">001-intro</a></li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and Docker Compose are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="002-compose-demo-lab-overview">Lab Overview<a class="headerlink" href="#002-compose-demo-lab-overview" title="Permanent link">&para;</a></h2>
<p>This <code>docker-compose-sample.yml</code> file defines a multi-container application with three services: <code>web</code>, <code>app</code>, and <code>db</code>. Below is a detailed explanation of each section.</p>
<h2 id="002-compose-demo-services">Services<a class="headerlink" href="#002-compose-demo-services" title="Permanent link">&para;</a></h2>
<h3 id="002-compose-demo-1-web-service">1. <code>web</code> Service<a class="headerlink" href="#002-compose-demo-1-web-service" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Image</strong>: Uses the official <code>nginx:latest</code> image.</li>
<li><strong>Container Name</strong>: The container is named <code>web-container</code>.</li>
<li><strong>Ports</strong>: Maps port <code>8080</code> on the host to port <code>80</code> in the container.</li>
<li><strong>Environment Variables</strong>:<ul>
<li><code>NGINX_HOST</code>: Set to <code>localhost</code></li>
<li><code>NGINX_PORT</code>: Set to <code>80</code></li>
</ul>
</li>
<li><strong>Volumes</strong>: Mounts the <code>./web-data</code> directory on the host to <code>/usr/share/nginx/html</code> in the container, allowing you to serve custom static files.</li>
<li><strong>Networks</strong>: Connects to the <code>webnet</code> network.</li>
<li><strong>Restart Policy</strong>: Always restarts the container if it stops.</li>
</ul>
<h3 id="002-compose-demo-2-app-service">2. <code>app</code> Service<a class="headerlink" href="#002-compose-demo-2-app-service" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Build</strong>: Builds the image from a <code>Dockerfile</code> located in the <code>./app</code> directory.</li>
<li><strong>Container Name</strong>: The container is named <code>app-container</code>.</li>
<li><strong>Ports</strong>: Maps port <code>3000</code> on the host to port <code>3000</code> in the container.</li>
<li><strong>Environment Variables</strong>:<ul>
<li><code>NODE_ENV</code>: Set to <code>production</code></li>
</ul>
</li>
<li><strong>Dependencies</strong>: Depends on the <code>db</code> service, ensuring the database starts before the app.</li>
<li><strong>Networks</strong>: Connects to both <code>webnet</code> and <code>dbnet</code> networks.</li>
<li><strong>Restart Policy</strong>: Restarts the container on failure.</li>
</ul>
<h3 id="002-compose-demo-3-db-service">3. <code>db</code> Service<a class="headerlink" href="#002-compose-demo-3-db-service" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Image</strong>: Uses the official <code>postgres:latest</code> image.</li>
<li><strong>Container Name</strong>: The container is named <code>db-container</code>.</li>
<li><strong>Environment Variables</strong>:<ul>
<li><code>POSTGRES_USER</code>: Set to <code>user</code></li>
<li><code>POSTGRES_PASSWORD</code>: Set to <code>password</code></li>
<li><code>POSTGRES_DB</code>: Set to <code>mydb</code></li>
</ul>
</li>
<li><strong>Volumes</strong>: Mounts a named volume <code>db-data</code> to <code>/var/lib/postgresql/data</code> in the container, persisting database data.</li>
<li><strong>Networks</strong>: Connects to the <code>dbnet</code> network.</li>
<li><strong>Restart Policy</strong>: Restarts the container unless stopped manually.</li>
</ul>
<hr />
<h2 id="002-compose-demo-volumes">Volumes<a class="headerlink" href="#002-compose-demo-volumes" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><code>db-data</code></strong>: A named volume used by the <code>db</code> service to persist <code>PostgreSQL</code> database.</li>
</ul>
<hr />
<h2 id="002-compose-demo-networks">Networks<a class="headerlink" href="#002-compose-demo-networks" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><code>webnet</code></strong>: A custom network used by the <code>web</code> and <code>app</code> services to communicate.</li>
<li><strong><code>dbnet</code></strong>: A custom network used by the <code>app</code> and <code>db</code> services to communicate.</li>
</ul>
<hr />
<p>This <code>docker-compose-sample.yml</code> file demonstrates how to define services, manage dependencies and configure networks and volumes for a multi-container application.</p>
<hr />
<h2 id="002-compose-demo-lab-exercises">Lab Exercises<a class="headerlink" href="#002-compose-demo-lab-exercises" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Examine the Sample File</strong>: Review the <code>docker-compose-sample.yml</code> file to understand the service definitions.</li>
<li><strong>Analyze Service Dependencies</strong>: Study how the <code>app</code> service depends on the <code>db</code> service.</li>
<li><strong>Understand Networking</strong>: See how services communicate through custom networks.</li>
<li><strong>Review Volume Management</strong>: Learn how data persistence is handled with defined volumes.</li>
</ol>
<h2 id="002-compose-demo-key-learning-points">Key Learning Points<a class="headerlink" href="#002-compose-demo-key-learning-points" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Multi-Service Architecture</strong>: How to structure applications with multiple containers.</li>
<li><strong>Service Dependencies</strong>: Using <code>depends_on</code> to control startup order.</li>
<li><strong>Network Isolation</strong>: Creating separate networks for different tiers.</li>
<li><strong>Data Persistence</strong>: Using volumes to maintain database state.</li>
<li><strong>Port Mapping</strong>: Exposing services to the host system.</li>
</ul>
<hr />
<h2 id="002-compose-demo-next-steps">Next Steps<a class="headerlink" href="#002-compose-demo-next-steps" title="Permanent link">&para;</a></h2>
<p>After completing this lab, you will understand:</p>
<ul>
<li>How to structure a real-world multi-container application.</li>
<li>The relationship between web servers, applications, and databases.</li>
<li>Best practices for service configuration in <code>Docker Compose</code>.</li>
</ul></section><section class="print-page" id="003-structure" heading-number="2.4"><h1 id="003-structure-docker-compose-structure-complete-guide">Docker Compose Structure - Complete Guide<a class="headerlink" href="#003-structure-docker-compose-structure-complete-guide" title="Permanent link">&para;</a></h1>
<h2 id="003-structure-description">Description<a class="headerlink" href="#003-structure-description" title="Permanent link">&para;</a></h2>
<p>This comprehensive lab covers the complete structure and syntax of <code>Docker Compose</code> files. You will learn about all the major configuration options, from basic service definitions to advanced features like health checks, networks and volumes.</p>
<hr />
<h2 id="003-structure-prerequisites">Prerequisites<a class="headerlink" href="#003-structure-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>).</li>
<li>Basic understanding of Docker concepts.</li>
<li>Familiarity with YAML syntax.</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and Docker Compose are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="003-structure-lab-overview">Lab Overview<a class="headerlink" href="#003-structure-lab-overview" title="Permanent link">&para;</a></h2>
<p>This comprehensive guide covers the complete structure and anatomy of <code>Docker Compose</code> files. You will master every aspect from basic service definitions to advanced production-ready configurations.</p>
<hr />
<h3 id="003-structure-example-of-a-docker-composeyml-file-structure">Example of a <code>docker-compose.yml</code> file structure<a class="headerlink" href="#003-structure-example-of-a-docker-composeyml-file-structure" title="Permanent link">&para;</a></h3>
<ul>
<li>Here is a simple example of a <code>docker-compose.yml</code> file structure:</li>
</ul>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#003-structure-__codelineno-0-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span><span class="w"> </span><span class="c1"># Compose file format version</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#003-structure-__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#003-structure-__codelineno-0-3"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#003-structure-__codelineno-0-4"></a><span class="w">  </span><span class="c1"># Here we define our services (containers)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#003-structure-__codelineno-0-5"></a><span class="w">  </span><span class="nt">myservice</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#003-structure-__codelineno-0-6"></a><span class="w">    </span><span class="c1"># configurations for myservice</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#003-structure-__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#003-structure-__codelineno-0-8"></a><span class="w">  </span><span class="nt">another_service</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#003-structure-__codelineno-0-9"></a><span class="w">    </span><span class="c1"># configurations for another_service</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#003-structure-__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#003-structure-__codelineno-0-11"></a><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#003-structure-__codelineno-0-12"></a><span class="w">  </span><span class="c1"># Global volume definitions (if any)</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#003-structure-__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#003-structure-__codelineno-0-14"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#003-structure-__codelineno-0-15"></a><span class="w">  </span><span class="c1"># Global network definitions (if any)</span>
</span></code></pre></div>
<hr />
<h2 id="003-structure-common-docker-compose-service-features">Common Docker Compose Service Features<a class="headerlink" href="#003-structure-common-docker-compose-service-features" title="Permanent link">&para;</a></h2>
<p>Now, let&rsquo;s detail the most common features you can use within each service definition:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>build</code></td>
<td>Specifies the build context or Dockerfile for creating container images.</td>
</tr>
<tr>
<td><code>command</code></td>
<td>Overrides the default command defined in the image.</td>
</tr>
<tr>
<td><code>configs</code></td>
<td>Defines configuration files for services. Configs let services to adapt their behavior <strong>without the need to rebuild</strong> a Docker image.</td>
</tr>
<tr>
<td><code>container_name</code></td>
<td>Assigns a custom name to the container.</td>
</tr>
<tr>
<td><code>depends_on</code></td>
<td>Defines service dependencies, controlling startup order.</td>
</tr>
<tr>
<td><code>entrypoint</code></td>
<td>Overrides the default entry point defined in the image.</td>
</tr>
<tr>
<td><code>environment</code></td>
<td>Sets environment variables for services.</td>
</tr>
<tr>
<td><code>healthcheck</code></td>
<td>Defines commands to check the health of a service.</td>
</tr>
<tr>
<td><code>image</code></td>
<td>Specifies an existing Docker image to use.</td>
</tr>
<tr>
<td><code>links</code></td>
<td><strong>(Legacy)</strong> Links services; replaced by <code>networks</code>.</td>
</tr>
<tr>
<td><code>networks</code></td>
<td>Defines custom networks for your containers.</td>
</tr>
<tr>
<td><code>ports</code></td>
<td>Maps container ports to host machine ports.</td>
</tr>
<tr>
<td><code>restart</code></td>
<td>Configures restart policies for containers (e.g., <code>always</code>, <code>on-failure</code>).</td>
</tr>
<tr>
<td><code>secrets</code></td>
<td>Defines secrets for sensitive data (e.g., passwords, API keys).</td>
</tr>
<tr>
<td><code>version</code></td>
<td>Specifies the Compose file format version.</td>
</tr>
<tr>
<td><code>volumes</code></td>
<td>Defines volumes used for persistent data storage.</td>
</tr>
<tr>
<td><code>x-&lt;feature_name&gt;</code></td>
<td>Custom extension fields for reusable configurations.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="003-structure-feature-details">Feature Details<a class="headerlink" href="#003-structure-feature-details" title="Permanent link">&para;</a></h2>
<h3 id="003-structure-version"><code>version</code><a class="headerlink" href="#003-structure-version" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Specifies the <code>Docker Compose</code> file format version. Each version has specific features and rules. It&rsquo;s recommended to use recent 3.x versions.</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#003-structure-__codelineno-1-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-services"><code>services</code><a class="headerlink" href="#003-structure-services" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> The top-level key that defines all the different containers that make up your application. Each key under <code>services</code> is your service name.</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#003-structure-__codelineno-2-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#003-structure-__codelineno-2-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#003-structure-__codelineno-2-3"></a><span class="w">    </span><span class="c1"># configurations for the web service</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#003-structure-__codelineno-2-4"></a><span class="w">  </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#003-structure-__codelineno-2-5"></a><span class="w">    </span><span class="c1"># configurations for the db service</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-build-building-an-image"><code>build</code> (Building an Image)<a class="headerlink" href="#003-structure-build-building-an-image" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Instead of using an existing image, <code>build</code> instructs <code>Docker Compose</code> to build a new image from a <code>Dockerfile</code> located at the specified path.</li>
<li><strong>Options:</strong><ul>
<li><code>context</code>: The path to the directory containing the <code>Dockerfile</code> and other files needed for the build.</li>
<li><code>dockerfile</code> (optional): The name of the <code>Dockerfile</code>, in cases that it is not named <code>Dockerfile</code> (e.g., <code>Dockerfile.dev</code>).</li>
<li><code>args</code> (optional): Build arguments that will be passed to the <code>Dockerfile</code> during the build process (like <code>ARG</code>).</li>
<li><code>target</code> (optional): A specific build stage to target from a multi-stage <code>Dockerfile</code>.</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#003-structure-__codelineno-3-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#003-structure-__codelineno-3-2"></a><span class="w">  </span><span class="nt">webapp</span><span class="p">:</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#003-structure-__codelineno-3-3"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#003-structure-__codelineno-3-4"></a><span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./my_app</span><span class="w"> </span><span class="c1"># Builds an image from the &#39;my_app&#39; directory (where Dockerfile resides)</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#003-structure-__codelineno-3-5"></a><span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.dev</span><span class="w"> </span><span class="c1"># Uses Dockerfile.dev file</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#003-structure-__codelineno-3-6"></a><span class="w">      </span><span class="nt">args</span><span class="p">:</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#003-structure-__codelineno-3-7"></a><span class="w">        </span><span class="nt">NODE_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;18&quot;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#003-structure-__codelineno-3-8"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#003-structure-__codelineno-3-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-image-using-an-existing-image"><code>image</code> (Using an Existing Image)<a class="headerlink" href="#003-structure-image-using-an-existing-image" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Instructs <code>Docker Compose</code> to pull and use an existing <code>Docker</code> image from a registry like <code>Docker Hub</code>.</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#003-structure-__codelineno-4-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#003-structure-__codelineno-4-2"></a><span class="w">  </span><span class="nt">database</span><span class="p">:</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#003-structure-__codelineno-4-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span><span class="w"> </span><span class="c1"># Uses the Postgres image at version 15</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#003-structure-__codelineno-4-4"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#003-structure-__codelineno-4-5"></a><span class="w">      </span><span class="nt">POSTGRES_DB</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mydatabase</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#003-structure-__codelineno-4-6"></a><span class="w">      </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#003-structure-__codelineno-4-7"></a><span class="w">      </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-command-and-entrypoint"><code>command</code> and <code>entrypoint</code><a class="headerlink" href="#003-structure-command-and-entrypoint" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong><code>command</code></strong>:</p>
<ul>
<li><strong>Purpose:</strong> Defines the command that will be executed when the container starts. This command overrides the <code>CMD</code> defined in the image&rsquo;s <code>Dockerfile</code>.</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#003-structure-__codelineno-5-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#003-structure-__codelineno-5-2"></a><span class="w">  </span><span class="nt">worker</span><span class="p">:</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#003-structure-__codelineno-5-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_worker_image</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#003-structure-__codelineno-5-4"></a><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;worker.py&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--queue&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;high&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Executes a Python script with arguments</span>
</span></code></pre></div>
</li>
</ul>
</li>
<li>
<p><strong><code>entrypoint</code></strong>:</p>
<ul>
<li><strong>Purpose:</strong> Defines the entry point for the container. The <code>command</code> (or <code>CMD</code> from the <code>Dockerfile</code>) will be passed as an argument to the <code>entrypoint</code>. This overrides the <code>ENTRYPOINT</code> defined in the <code>Dockerfile</code>.</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#003-structure-__codelineno-6-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#003-structure-__codelineno-6-2"></a><span class="w">  </span><span class="nt">script_runner</span><span class="p">:</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#003-structure-__codelineno-6-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#003-structure-__codelineno-6-4"></a><span class="w">    </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;bash&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Entry point will be running bash</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#003-structure-__codelineno-6-5"></a><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;echo</span><span class="nv"> </span><span class="s">Hello</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Docker</span><span class="nv"> </span><span class="s">Compose!&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># The command will be passed as an argument to bash -c</span>
</span></code></pre></div>
</li>
</ul>
</li>
</ul>
<h3 id="003-structure-ports-port-mapping"><code>ports</code> (Port Mapping)<a class="headerlink" href="#003-structure-ports-port-mapping" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Maps ports from the container to ports on the host machine, allowing access to the service from outside the container.</li>
<li><strong>Formats:</strong><ul>
<li><code>"HOST_PORT:CONTAINER_PORT"</code>: Maps a specific port.</li>
<li><code>"CONTAINER_PORT"</code>: A random available host port will be mapped to <code>CONTAINER_PORT</code>.</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#003-structure-__codelineno-7-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#003-structure-__codelineno-7-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#003-structure-__codelineno-7-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:latest</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#003-structure-__codelineno-7-4"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#003-structure-__codelineno-7-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span><span class="w">     </span><span class="c1"># Host port 80 maps to container port 80</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#003-structure-__codelineno-7-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span><span class="w">   </span><span class="c1"># Host port 443 maps to container port 443</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#003-structure-__codelineno-7-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080&quot;</span><span class="w">      </span><span class="c1"># Container port 8080 maps to a random host port</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-volumes-volume-management"><code>volumes</code> (Volume Management)<a class="headerlink" href="#003-structure-volumes-volume-management" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Allows for persistent data storage - ensuring data remains even if the container is recreated or removed. You can map files / directories from the host machine into the container (bind mounts) or use Docker-managed volumes (named volumes).</li>
<li><strong>Formats:</strong><ul>
<li><code>"HOST_PATH:CONTAINER_PATH"</code>: Bind mount</li>
<li><code>"VOLUME_NAME:CONTAINER_PATH"</code>: Named volume</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#003-structure-__codelineno-8-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#003-structure-__codelineno-8-2"></a><span class="w">  </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#003-structure-__codelineno-8-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#003-structure-__codelineno-8-4"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#003-structure-__codelineno-8-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db_data:/var/lib/postgresql/data</span><span class="w"> </span><span class="c1"># Named volume for persistent DB data</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#003-structure-__codelineno-8-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app/config:/etc/app/config</span><span class="w">     </span><span class="c1"># Bind mount: maps host folder to container (for config files)</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#003-structure-__codelineno-9-1"></a><span class="nt">volumes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\# Global volume definitions</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#003-structure-__codelineno-9-2"></a><span class="nt">db\_data</span><span class="p">:</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#003-structure-__codelineno-9-3"></a><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local \# Volume driver (default)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#003-structure-__codelineno-9-4"></a><span class="l l-Scalar l-Scalar-Plain">\# You can also add options or driver\_opts for advanced configurations,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#003-structure-__codelineno-9-5"></a><span class="l l-Scalar l-Scalar-Plain">\# e.g., driver\_opts</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="nv">nfs</span><span class="p p-Indicator">,</span><span class="nt"> o</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;addr=192.168.1.100,nolock,rw&quot;</span><span class="p p-Indicator">,</span><span class="nt"> device</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:/export/data&quot;</span><span class="p p-Indicator">}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#003-structure-__codelineno-9-6"></a><span class="l l-Scalar l-Scalar-Plain">\# but this is less common for a simple guide.</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-environment-environment-variables"><code>environment</code> (Environment Variables)<a class="headerlink" href="#003-structure-environment-environment-variables" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Defines environment variables for the container. Useful for passing configuration details like passwords, API keys or environment settings (development / production).</li>
<li><strong>Formats:</strong><ul>
<li>List of <code>KEY=VALUE</code> strings</li>
<li>Map of <code>KEY: VALUE</code> pairs</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#003-structure-__codelineno-10-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#003-structure-__codelineno-10-2"></a><span class="w">  </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#003-structure-__codelineno-10-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_api_image</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#003-structure-__codelineno-10-4"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#003-structure-__codelineno-10-5"></a><span class="w">      </span><span class="nt">API_KEY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your_api_key</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#003-structure-__codelineno-10-6"></a><span class="w">      </span><span class="nt">DATABASE_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres://user:password@db:5432/mydb</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#003-structure-__codelineno-10-7"></a><span class="w">      </span><span class="nt">NODE_ENV</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">development</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#003-structure-__codelineno-10-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG=true</span><span class="w"> </span><span class="c1"># Another format for lists</span>
</span></code></pre></div>
</li>
</ul>
<details class="tip">
<summary>Sensitive Variables</summary>
<p>For best practice when using sensative varuables, consider using a <code>.env</code> file (to be placed in the same directory as your <code>docker-compose.yml</code>) or <code>Docker Secrets</code>.</p>
</details>
<h3 id="003-structure-depends_on-service-dependencies"><code>depends_on</code> (Service Dependencies)<a class="headerlink" href="#003-structure-depends_on-service-dependencies" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Defines the startup order between services, so services will only start after the services they depend on have been started.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p><code>depends_on</code> ensures the container has started, but not necessarily that the service within it is ready to accept connections (e.g., a database fully booted and listening).</p>
</div>
<ul>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#003-structure-__codelineno-11-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#003-structure-__codelineno-11-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#003-structure-__codelineno-11-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_web_app</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#003-structure-__codelineno-11-4"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#003-structure-__codelineno-11-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span><span class="w"> </span><span class="c1"># The web service will start only after the api service has started</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#003-structure-__codelineno-11-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span><span class="w">  </span><span class="c1"># And the db service has started</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#003-structure-__codelineno-11-7"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#003-structure-__codelineno-11-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#003-structure-__codelineno-11-9"></a><span class="w">  </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#003-structure-__codelineno-11-10"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_api_service</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#003-structure-__codelineno-11-11"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#003-structure-__codelineno-11-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span><span class="w"> </span><span class="c1"># The api service will start only after the db service has started</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#003-structure-__codelineno-11-13"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#003-structure-__codelineno-11-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:3000&quot;</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#003-structure-__codelineno-11-15"></a><span class="w">  </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#003-structure-__codelineno-11-16"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-networks-defining-networks"><code>networks</code> (Defining Networks)<a class="headerlink" href="#003-structure-networks-defining-networks" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Purpose:</strong> Allows you to define custom networks so that services can communicate with each other. Services on the same network can communicate using their service names (DNS resolution).</p>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#003-structure-__codelineno-12-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#003-structure-__codelineno-12-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#003-structure-__codelineno-12-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#003-structure-__codelineno-12-4"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#003-structure-__codelineno-12-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#003-structure-__codelineno-12-6"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#003-structure-__codelineno-12-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend_network</span><span class="w"> </span><span class="c1"># Connected to frontend_network</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#003-structure-__codelineno-12-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend_network</span><span class="w">  </span><span class="c1"># Connected to backend_network</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#003-structure-__codelineno-12-9"></a><span class="w">  </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#003-structure-__codelineno-12-10"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_api_app</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#003-structure-__codelineno-12-11"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#003-structure-__codelineno-12-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend_network</span><span class="w">  </span><span class="c1"># Connected to backend_network</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#003-structure-__codelineno-12-13"></a><span class="w">  </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#003-structure-__codelineno-12-14"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#003-structure-__codelineno-12-15"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#003-structure-__codelineno-12-16"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db_network</span><span class="w"> </span><span class="c1"># Connected to db_network</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#003-structure-__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#003-structure-__codelineno-12-18"></a><span class="nt">networks</span><span class="p">:</span><span class="w">  </span><span class="c1"># Global network definitions</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#003-structure-__codelineno-12-19"></a><span class="w">  </span><span class="nt">frontend_network</span><span class="p">:</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#003-structure-__codelineno-12-20"></a><span class="w">    </span><span class="c1"># driver: bridge (default)</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#003-structure-__codelineno-12-21"></a><span class="w">  </span><span class="nt">backend_network</span><span class="p">:</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#003-structure-__codelineno-12-22"></a><span class="w">    </span><span class="c1"># driver: bridge</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#003-structure-__codelineno-12-23"></a><span class="w">  </span><span class="nt">db_network</span><span class="p">:</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#003-structure-__codelineno-12-24"></a><span class="w">    </span><span class="nt">internal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Internal network only (not accessible from the host)</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#003-structure-__codelineno-12-25"></a><span class="w">    </span><span class="c1"># ipam:</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#003-structure-__codelineno-12-26"></a><span class="w">    </span><span class="c1">#   config:</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#003-structure-__codelineno-12-27"></a><span class="w">    </span><span class="c1">#     - subnet: 172.20.0.0/24 # Defines an IP range for the network for the  </span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-links-linking-services-legacy"><code>links</code> (Linking Services - Legacy)<a class="headerlink" href="#003-structure-links-linking-services-legacy" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Purpose:</strong> Allow linking older services (pre-Compose v2) and provides aliases for hostnames. <strong>It is highly recommended to use <code>networks</code> instead of <code>links</code> in newer <code>Docker Compose</code> versions (v2 and above), as <code>links</code> are considered legacy.</strong></p>
</li>
<li>
<p><strong>Example (Not recommended for new usage):</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#003-structure-__codelineno-13-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#003-structure-__codelineno-13-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#003-structure-__codelineno-13-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_web_app</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#003-structure-__codelineno-13-4"></a><span class="w">    </span><span class="nt">links</span><span class="p">:</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#003-structure-__codelineno-13-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db:database_alias</span><span class="w"> </span><span class="c1"># Links to &#39;db&#39; and gives it an alias &#39;database_alias&#39;</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-container_name-custom-container-name"><code>container_name</code> (Custom Container Name)<a class="headerlink" href="#003-structure-container_name-custom-container-name" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> Allows you to specify a custom name for the running container, instead of the name <code>Docker Compose</code> automatically generates (usually <code>project_service_index</code>).</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#003-structure-__codelineno-14-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#003-structure-__codelineno-14-2"></a><span class="w">  </span><span class="nt">my_web</span><span class="p">:</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#003-structure-__codelineno-14-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#003-structure-__codelineno-14-4"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_nginx_server</span><span class="w"> </span><span class="c1"># The container will be named &#39;my_nginx_server&#39;</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#003-structure-__codelineno-14-5"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#003-structure-__codelineno-14-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-restart-restart-policy"><code>restart</code> (Restart Policy)<a class="headerlink" href="#003-structure-restart-restart-policy" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Purpose:</strong> Determines how the container will be restarted, in cases it exits or crashes.</p>
</li>
<li>
<p><strong>Options:</strong></p>
<ul>
<li><code>no</code>: Does not restart (default).</li>
<li><code>on-failure</code>: Restarts only if the container exits with a non-zero exit code.</li>
<li><code>always</code>: Always restarts, even if the container exits successfully.</li>
<li><code>unless-stopped</code>: Always restarts unless it is explicitly stopped.</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#003-structure-__codelineno-15-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#003-structure-__codelineno-15-2"></a><span class="w">  </span><span class="nt">app</span><span class="p">:</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#003-structure-__codelineno-15-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_app</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#003-structure-__codelineno-15-4"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span><span class="w"> </span><span class="c1"># Always restarts, unless manually stopped</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="003-structure-healthcheck-health-check"><code>healthcheck</code> (Health Check)<a class="headerlink" href="#003-structure-healthcheck-health-check" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Purpose:</strong> Defines how <code>Docker</code> can check if the container, and the service running within it, are healthy and functional. This is particularly useful in conjunction with <code>depends_on</code>, in order to ensure a dependent service is truly ready before other services connect to it.</p>
</li>
<li>
<p><strong>Options:</strong></p>
<ul>
<li><code>test</code>: Sets the command to be executed for the health check.</li>
<li><code>interval</code>: Determines how often to run the check (default: 30s).</li>
<li><code>timeout</code>: Sets the maximum time allowed for a single check to complete (default: 30s).</li>
<li><code>retries</code>: Sets how many consecutive failures are needed to consider the container unhealthy (default: 3).</li>
<li><code>start_period</code>: Sets initialization time to allow a container to bootstrap. During this period, health check failures will not count towards the maximum retries (default: 0s).</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#003-structure-__codelineno-16-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#003-structure-__codelineno-16-2"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#003-structure-__codelineno-16-3"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_web_app</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#003-structure-__codelineno-16-4"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#003-structure-__codelineno-16-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#003-structure-__codelineno-16-6"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#003-structure-__codelineno-16-7"></a><span class="w">      </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#003-structure-__codelineno-16-8"></a><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class="w"> </span><span class="c1"># The web service will only start after &#39;api&#39; is healthy</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#003-structure-__codelineno-16-9"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#003-structure-__codelineno-16-10"></a><span class="w">      </span><span class="c1"># Checks if web server responds</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#003-structure-__codelineno-16-11"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD-SHELL&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;curl</span><span class="nv"> </span><span class="s">-f</span><span class="nv"> </span><span class="s">http://localhost/</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">exit</span><span class="nv"> </span><span class="s">1&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#003-structure-__codelineno-16-12"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#003-structure-__codelineno-16-13"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#003-structure-__codelineno-16-14"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#003-structure-__codelineno-16-15"></a><span class="w">      </span><span class="c1"># Give the service 20 seconds to start up initially</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#003-structure-__codelineno-16-16"></a><span class="w">      </span><span class="c1"># before starting health checks</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#003-structure-__codelineno-16-17"></a><span class="w">      </span><span class="nt">start_period: 20s api</span><span class="p">:</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#003-structure-__codelineno-16-18"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_api_service</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#003-structure-__codelineno-16-19"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#003-structure-__codelineno-16-20"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:3000&quot;</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#003-structure-__codelineno-16-21"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#003-structure-__codelineno-16-22"></a><span class="w">      </span><span class="c1"># Checks a health endpoint</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#003-structure-__codelineno-16-23"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD-SHELL&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;curl</span><span class="nv"> </span><span class="s">-f</span><span class="nv"> </span><span class="s">http://localhost:3000/health</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">exit</span><span class="nv"> </span><span class="s">1&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#003-structure-__codelineno-16-24"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#003-structure-__codelineno-16-25"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3s</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#003-structure-__codelineno-16-26"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span></code></pre></div>
</li>
</ul>
<hr />
<h2 id="003-structure-a-complete-docker-composeyml-example">A Complete <code>docker-compose.yml</code> Example<a class="headerlink" href="#003-structure-a-complete-docker-composeyml-example" title="Permanent link">&para;</a></h2>
<p>Here is an example combining many of the features discussed above, while illustrating a simple web application alongside a backend API and a database:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#003-structure-__codelineno-17-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#003-structure-__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#003-structure-__codelineno-17-3"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#003-structure-__codelineno-17-4"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#003-structure-__codelineno-17-5"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#003-structure-__codelineno-17-6"></a><span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./frontend</span><span class="w"> </span><span class="c1"># Assumes a frontend application in ./frontend with its Dockerfile</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#003-structure-__codelineno-17-7"></a><span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#003-structure-__codelineno-17-8"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-webapp-frontend</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#003-structure-__codelineno-17-9"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#003-structure-__codelineno-17-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#003-structure-__codelineno-17-11"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#003-structure-__codelineno-17-12"></a><span class="w">      </span><span class="nt">API_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://api:3000</span><span class="w"> </span><span class="c1"># Connects to the &#39;api&#39; service within the Docker network</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#003-structure-__codelineno-17-13"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#003-structure-__codelineno-17-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app_network</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#003-structure-__codelineno-17-15"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#003-structure-__codelineno-17-16"></a><span class="w">      </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#003-structure-__codelineno-17-17"></a><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class="w"> </span><span class="c1"># Ensures API is healthy before starting web</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#003-structure-__codelineno-17-18"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless_stopped</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#003-structure-__codelineno-17-19"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#003-structure-__codelineno-17-20"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;http://localhost/&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#003-structure-__codelineno-17-21"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#003-structure-__codelineno-17-22"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#003-structure-__codelineno-17-23"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#003-structure-__codelineno-17-24"></a><span class="w">      </span><span class="nt">start_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#003-structure-__codelineno-17-25"></a>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#003-structure-__codelineno-17-26"></a><span class="w">  </span><span class="nt">api</span><span class="p">:</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#003-structure-__codelineno-17-27"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#003-structure-__codelineno-17-28"></a><span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./backend</span><span class="w"> </span><span class="c1"># Assumes a backend API application in ./backend with its Dockerfile</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#003-structure-__codelineno-17-29"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-api-backend</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#003-structure-__codelineno-17-30"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#003-structure-__codelineno-17-31"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3000:3000&quot;</span>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#003-structure-__codelineno-17-32"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#003-structure-__codelineno-17-33"></a><span class="w">      </span><span class="nt">DB_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span><span class="w"> </span><span class="c1"># Connects to the &#39;db&#39; service within the Docker network</span>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#003-structure-__codelineno-17-34"></a><span class="w">      </span><span class="nt">DB_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#003-structure-__codelineno-17-35"></a><span class="w">      </span><span class="nt">DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#003-structure-__codelineno-17-36"></a><span class="w">      </span><span class="nt">DB_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mydatabase</span>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#003-structure-__codelineno-17-37"></a><span class="w">      </span><span class="nt">NODE_ENV</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#003-structure-__codelineno-17-38"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#003-structure-__codelineno-17-39"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api_logs:/var/log/my_app</span><span class="w"> </span><span class="c1"># Mounts a named volume for API logs</span>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#003-structure-__codelineno-17-40"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#003-structure-__codelineno-17-41"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app_network</span>
</span><span id="__span-17-42"><a id="__codelineno-17-42" name="__codelineno-17-42" href="#003-structure-__codelineno-17-42"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db_network</span><span class="w"> </span><span class="c1"># Connects to both app and db networks</span>
</span><span id="__span-17-43"><a id="__codelineno-17-43" name="__codelineno-17-43" href="#003-structure-__codelineno-17-43"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-17-44"><a id="__codelineno-17-44" name="__codelineno-17-44" href="#003-structure-__codelineno-17-44"></a><span class="w">      </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-17-45"><a id="__codelineno-17-45" name="__codelineno-17-45" href="#003-structure-__codelineno-17-45"></a><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span><span class="w"> </span><span class="c1"># Ensures DB is healthy before starting API</span>
</span><span id="__span-17-46"><a id="__codelineno-17-46" name="__codelineno-17-46" href="#003-structure-__codelineno-17-46"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on_failure</span>
</span><span id="__span-17-47"><a id="__codelineno-17-47" name="__codelineno-17-47" href="#003-structure-__codelineno-17-47"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-17-48"><a id="__codelineno-17-48" name="__codelineno-17-48" href="#003-structure-__codelineno-17-48"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;http://localhost:3000/health&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-17-49"><a id="__codelineno-17-49" name="__codelineno-17-49" href="#003-structure-__codelineno-17-49"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15s</span>
</span><span id="__span-17-50"><a id="__codelineno-17-50" name="__codelineno-17-50" href="#003-structure-__codelineno-17-50"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-17-51"><a id="__codelineno-17-51" name="__codelineno-17-51" href="#003-structure-__codelineno-17-51"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-17-52"><a id="__codelineno-17-52" name="__codelineno-17-52" href="#003-structure-__codelineno-17-52"></a><span class="w">      </span><span class="nt">start_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15s</span>
</span><span id="__span-17-53"><a id="__codelineno-17-53" name="__codelineno-17-53" href="#003-structure-__codelineno-17-53"></a>
</span><span id="__span-17-54"><a id="__codelineno-17-54" name="__codelineno-17-54" href="#003-structure-__codelineno-17-54"></a><span class="w">  </span><span class="nt">db</span><span class="p">:</span>
</span><span id="__span-17-55"><a id="__codelineno-17-55" name="__codelineno-17-55" href="#003-structure-__codelineno-17-55"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
</span><span id="__span-17-56"><a id="__codelineno-17-56" name="__codelineno-17-56" href="#003-structure-__codelineno-17-56"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-postgres-db</span>
</span><span id="__span-17-57"><a id="__codelineno-17-57" name="__codelineno-17-57" href="#003-structure-__codelineno-17-57"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-17-58"><a id="__codelineno-17-58" name="__codelineno-17-58" href="#003-structure-__codelineno-17-58"></a><span class="w">      </span><span class="nt">POSTGRES_DB</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mydatabase</span>
</span><span id="__span-17-59"><a id="__codelineno-17-59" name="__codelineno-17-59" href="#003-structure-__codelineno-17-59"></a><span class="w">      </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span>
</span><span id="__span-17-60"><a id="__codelineno-17-60" name="__codelineno-17-60" href="#003-structure-__codelineno-17-60"></a><span class="w">      </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
</span><span id="__span-17-61"><a id="__codelineno-17-61" name="__codelineno-17-61" href="#003-structure-__codelineno-17-61"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-17-62"><a id="__codelineno-17-62" name="__codelineno-17-62" href="#003-structure-__codelineno-17-62"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db_data:/var/lib/postgresql/data</span><span class="w"> </span><span class="c1"># Mounts a named volume for persistent DB data</span>
</span><span id="__span-17-63"><a id="__codelineno-17-63" name="__codelineno-17-63" href="#003-structure-__codelineno-17-63"></a><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-17-64"><a id="__codelineno-17-64" name="__codelineno-17-64" href="#003-structure-__codelineno-17-64"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db_network</span><span class="w"> </span><span class="c1"># Only connected to the database network</span>
</span><span id="__span-17-65"><a id="__codelineno-17-65" name="__codelineno-17-65" href="#003-structure-__codelineno-17-65"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span><span id="__span-17-66"><a id="__codelineno-17-66" name="__codelineno-17-66" href="#003-structure-__codelineno-17-66"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-17-67"><a id="__codelineno-17-67" name="__codelineno-17-67" href="#003-structure-__codelineno-17-67"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD-SHELL&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;pg_isready</span><span class="nv"> </span><span class="s">-U</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">-d</span><span class="nv"> </span><span class="s">mydatabase&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-17-68"><a id="__codelineno-17-68" name="__codelineno-17-68" href="#003-structure-__codelineno-17-68"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-17-69"><a id="__codelineno-17-69" name="__codelineno-17-69" href="#003-structure-__codelineno-17-69"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-17-70"><a id="__codelineno-17-70" name="__codelineno-17-70" href="#003-structure-__codelineno-17-70"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-17-71"><a id="__codelineno-17-71" name="__codelineno-17-71" href="#003-structure-__codelineno-17-71"></a>
</span><span id="__span-17-72"><a id="__codelineno-17-72" name="__codelineno-17-72" href="#003-structure-__codelineno-17-72"></a><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-17-73"><a id="__codelineno-17-73" name="__codelineno-17-73" href="#003-structure-__codelineno-17-73"></a><span class="w">  </span><span class="nt">db_data</span><span class="p">:</span><span class="w"> </span><span class="c1"># Definition of the named volume for database data</span>
</span><span id="__span-17-74"><a id="__codelineno-17-74" name="__codelineno-17-74" href="#003-structure-__codelineno-17-74"></a><span class="w">  </span><span class="nt">api_logs</span><span class="p">:</span><span class="w"> </span><span class="c1"># Definition of the named volume for API logs</span>
</span><span id="__span-17-75"><a id="__codelineno-17-75" name="__codelineno-17-75" href="#003-structure-__codelineno-17-75"></a>
</span><span id="__span-17-76"><a id="__codelineno-17-76" name="__codelineno-17-76" href="#003-structure-__codelineno-17-76"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-17-77"><a id="__codelineno-17-77" name="__codelineno-17-77" href="#003-structure-__codelineno-17-77"></a><span class="w">  </span><span class="nt">app_network</span><span class="p">:</span><span class="w"> </span><span class="c1"># Network for web and API communication</span>
</span><span id="__span-17-78"><a id="__codelineno-17-78" name="__codelineno-17-78" href="#003-structure-__codelineno-17-78"></a><span class="w">  </span><span class="nt">db_network</span><span class="p">:</span><span class="w">  </span><span class="c1"># Network for API and DB communication (can be internal for better isolation)</span>
</span><span id="__span-17-79"><a id="__codelineno-17-79" name="__codelineno-17-79" href="#003-structure-__codelineno-17-79"></a><span class="w">    </span><span class="nt">internal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Makes this network only accessible by containers connected to it, not from the host directly</span>
</span></code></pre></div></section><section class="print-page" id="004-commands" heading-number="2.5"><h1 id="004-commands-docker-compose-commands-essential-cli-reference">Docker Compose Commands - Essential CLI Reference<a class="headerlink" href="#004-commands-docker-compose-commands-essential-cli-reference" title="Permanent link">&para;</a></h1>
<h2 id="004-commands-description">Description<a class="headerlink" href="#004-commands-description" title="Permanent link">&para;</a></h2>
<p>This lab provides a comprehensive guide to <code>Docker Compose</code> command-line interface (<code>CLI</code>). You will master all the essential commands needed to manage multi-container applications effectively, from basic startup and shutdown to advanced debugging and maintenance operations.</p>
<hr />
<h2 id="004-commands-prerequisites">Prerequisites<a class="headerlink" href="#004-commands-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>, <a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a>).</li>
<li><code>Docker</code> and <code>Docker Compose</code> installed.</li>
<li>Basic understanding of <code>Docker Compose</code> file structure.</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and `Docker Compose` are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="004-commands-lab-overview">Lab Overview<a class="headerlink" href="#004-commands-lab-overview" title="Permanent link">&para;</a></h2>
<p>This comprehensive command guide covers the <code>Docker Compose</code> CLI, focusing on the most common and powerful commands that allow you to easily manage complex multi-container application environments.</p>
<hr />
<h2 id="004-commands-docker-compose-commands"><code>Docker Compose</code> Commands<a class="headerlink" href="#004-commands-docker-compose-commands" title="Permanent link">&para;</a></h2>
<ul>
<li>The <code>Docker Compose commands</code> are used to interact with <code>Docker Compose</code> from the command line.</li>
<li>They allow you to manage multi-container <code>Docker</code> applications defined in a <code>docker-compose.yml</code> file.</li>
<li>Here are some of the most commonly used commands:</li>
</ul>
<table>
<thead>
<tr>
<th>Command</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker compose up</code></td>
<td>Builds, (re)creates, starts and attaches to containers for a service</td>
</tr>
<tr>
<td><code>docker compose down</code></td>
<td>Stops containers and removes containers, networks, volumes and images</td>
</tr>
<tr>
<td><code>docker compose build</code></td>
<td>Builds or rebuilds services</td>
</tr>
<tr>
<td><code>docker compose ps</code></td>
<td>Lists containers</td>
</tr>
<tr>
<td><code>docker compose logs</code></td>
<td>Displays log output from services</td>
</tr>
<tr>
<td><code>docker compose exec</code></td>
<td>Executes a command in a running container</td>
</tr>
<tr>
<td><code>docker compose pull</code></td>
<td>Pulls service images</td>
</tr>
<tr>
<td><code>docker compose restart</code></td>
<td>Restarts services</td>
</tr>
<tr>
<td><code>docker compose stop</code></td>
<td>Stops running containers without removing them</td>
</tr>
<tr>
<td><code>docker compose start</code></td>
<td>Starts existing containers for a service</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="004-commands-command-examples"><code>Command</code> Examples<a class="headerlink" href="#004-commands-command-examples" title="Permanent link">&para;</a></h2>
<h3 id="004-commands-explanation-and-examples-for-commands">Explanation and Examples for <code>Commands</code><a class="headerlink" href="#004-commands-explanation-and-examples-for-commands" title="Permanent link">&para;</a></h3>
<h4 id="004-commands-docker-compose-up"><code>docker compose up</code><a class="headerlink" href="#004-commands-docker-compose-up" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Builds, (re)creates, starts, and attaches to containers for a service.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#004-commands-__codelineno-0-1"></a><span class="c1"># Start the application defined in docker-compose.yml</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#004-commands-__codelineno-0-2"></a><span class="c1"># -d = Runs the containers in detached mode.</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#004-commands-__codelineno-0-3"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-down"><code>docker compose down</code><a class="headerlink" href="#004-commands-docker-compose-down" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>Explanation</strong>: Stops containers and removes containers, networks, volumes and images that have been created by <code>docker compose up</code>.</p>
</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#004-commands-__codelineno-1-1"></a><span class="c1"># Stops and removes containers along with associated volumes.</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#004-commands-__codelineno-1-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>down<span class="w"> </span>--volumes
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-build"><code>docker compose build</code><a class="headerlink" href="#004-commands-docker-compose-build" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Builds or rebuilds services defined in the <code>docker-compose.yml</code> file.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#004-commands-__codelineno-2-1"></a><span class="c1"># Builds all services.</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#004-commands-__codelineno-2-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>build
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-ps"><code>docker compose ps</code><a class="headerlink" href="#004-commands-docker-compose-ps" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Lists containers for the application that have been defined in the <code>docker-compose.yml</code> file.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#004-commands-__codelineno-3-1"></a><span class="c1"># Displays the status of all containers.</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#004-commands-__codelineno-3-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>ps
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-logs"><code>docker compose logs</code><a class="headerlink" href="#004-commands-docker-compose-logs" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Displays log output from services.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#004-commands-__codelineno-4-1"></a><span class="c1"># Follows the logs of all running services.</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#004-commands-__codelineno-4-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-exec"><code>docker compose exec</code><a class="headerlink" href="#004-commands-docker-compose-exec" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Executes a command in a running container.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#004-commands-__codelineno-5-1"></a><span class="c1"># Opens a bash shell in the `web` service container.</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#004-commands-__codelineno-5-2"></a>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>bash
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-pull"><code>docker compose pull</code><a class="headerlink" href="#004-commands-docker-compose-pull" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Pulls service images defined in the <code>docker-compose.yml</code> file.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#004-commands-__codelineno-6-1"></a><span class="c1"># Pulls the latest images for all services.</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#004-commands-__codelineno-6-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>pull
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-restart"><code>docker compose restart</code><a class="headerlink" href="#004-commands-docker-compose-restart" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Restarts services.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#004-commands-__codelineno-7-1"></a><span class="c1"># Restarts the `web` service.</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#004-commands-__codelineno-7-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>restart<span class="w"> </span>web
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-stop"><code>docker compose stop</code><a class="headerlink" href="#004-commands-docker-compose-stop" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Stops running containers without removing them.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#004-commands-__codelineno-8-1"></a><span class="c1"># Stops all running containers.</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#004-commands-__codelineno-8-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>stop
</span></code></pre></div>
</li>
</ul>
<h4 id="004-commands-docker-compose-start"><code>docker compose start</code><a class="headerlink" href="#004-commands-docker-compose-start" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Explanation</strong>: Starts existing containers for a service.</li>
<li>
<p><strong>Example</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#004-commands-__codelineno-9-1"></a><span class="c1"># Starts the `web` service container.</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#004-commands-__codelineno-9-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>start<span class="w"> </span>web
</span></code></pre></div>
</li>
</ul>
<hr />
<h2 id="004-commands-command-categories-and-use-cases"><code>Command</code> Categories and Use Cases<a class="headerlink" href="#004-commands-command-categories-and-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="004-commands-development-workflow-commands">Development Workflow <code>Commands</code><a class="headerlink" href="#004-commands-development-workflow-commands" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>docker compose up -d</code></strong>: Start development environment in background</li>
<li><strong><code>docker compose logs -f [service]</code></strong>: Monitor application logs during development</li>
<li><strong><code>docker compose exec [service] bash</code></strong>: Debug issues by accessing container shell</li>
<li><strong><code>docker compose down</code></strong>: Clean shutdown of development environment</li>
</ul>
<h3 id="004-commands-build-and-update-commands">Build and Update <code>Commands</code><a class="headerlink" href="#004-commands-build-and-update-commands" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>docker compose build</code></strong>: Rebuild images after code changes</li>
<li><strong><code>docker compose pull</code></strong>: Update to latest base images</li>
<li><strong><code>docker compose up --build</code></strong>: Rebuild and restart in one command</li>
</ul>
<h3 id="004-commands-maintenance-commands">Maintenance <code>Commands</code><a class="headerlink" href="#004-commands-maintenance-commands" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>docker compose ps</code></strong>: Show the running / stopped containers (output includes: container name, command, state and ports)</li>
<li><strong><code>docker compose restart [service]</code></strong>: Restart specific problematic services</li>
<li><strong><code>docker compose stop/start</code></strong>: Pause and resume without losing data</li>
</ul>
<hr />
<h2 id="004-commands-advanced-command-options">Advanced <code>Command</code> Options<a class="headerlink" href="#004-commands-advanced-command-options" title="Permanent link">&para;</a></h2>
<h3 id="004-commands-common-flags-and-options">Common Flags and Options<a class="headerlink" href="#004-commands-common-flags-and-options" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>-f, --file</code></strong>: Specify custom <code>Docker Compose</code> file name</li>
<li><strong><code>-p, --project-name</code></strong>: Override project name</li>
<li><strong><code>--env-file</code></strong>: Specify environment file</li>
<li><strong><code>--profile</code></strong>: Activate specific service profiles</li>
</ul>
<h3 id="004-commands-examples-with-advanced-options">Examples with Advanced Options<a class="headerlink" href="#004-commands-examples-with-advanced-options" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#004-commands-__codelineno-10-1"></a><span class="c1"># Use custom compose file</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#004-commands-__codelineno-10-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>docker-compose.prod.yml<span class="w"> </span>up<span class="w"> </span>-d
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#004-commands-__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#004-commands-__codelineno-10-4"></a><span class="c1"># Set custom project name</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#004-commands-__codelineno-10-5"></a>docker<span class="w"> </span>compose<span class="w"> </span>-p<span class="w"> </span>myproject<span class="w"> </span>up<span class="w"> </span>-d
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#004-commands-__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#004-commands-__codelineno-10-7"></a><span class="c1"># Use specific environment file</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#004-commands-__codelineno-10-8"></a>docker<span class="w"> </span>compose<span class="w"> </span>--env-file<span class="w"> </span>.env.production<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div>
<hr />
<h2 id="004-commands-troubleshooting-commands">Troubleshooting Commands<a class="headerlink" href="#004-commands-troubleshooting-commands" title="Permanent link">&para;</a></h2>
<h3 id="004-commands-debugging-issues">Debugging Issues<a class="headerlink" href="#004-commands-debugging-issues" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#004-commands-__codelineno-11-1"></a><span class="c1"># View detailed container information</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#004-commands-__codelineno-11-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>ps<span class="w"> </span>-a
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#004-commands-__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#004-commands-__codelineno-11-4"></a><span class="c1"># Check logs for specific service</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#004-commands-__codelineno-11-5"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>web
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#004-commands-__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#004-commands-__codelineno-11-7"></a><span class="c1"># Follow logs in real-time</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#004-commands-__codelineno-11-8"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>--tail<span class="o">=</span><span class="m">50</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#004-commands-__codelineno-11-9"></a>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#004-commands-__codelineno-11-10"></a><span class="c1"># Inspect container configuration</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#004-commands-__codelineno-11-11"></a>docker<span class="w"> </span>compose<span class="w"> </span>config
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#004-commands-__codelineno-11-12"></a>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#004-commands-__codelineno-11-13"></a><span class="c1"># View resource usage</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#004-commands-__codelineno-11-14"></a>docker<span class="w"> </span>compose<span class="w"> </span>top
</span></code></pre></div>
<hr />
<h2 id="004-commands-best-practices">Best Practices<a class="headerlink" href="#004-commands-best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Use detached mode (<code>-d</code>)</strong> for long-running services.</li>
<li><strong>Follow logs regularly</strong> to monitor application health.</li>
<li><strong>Clean up resources</strong> with <code>docker compose down</code> when done.</li>
<li><strong>Use specific service names</strong> for targeted operations.</li>
<li><strong>Combine commands</strong> for efficient workflows (e.g., <code>up --build</code>).</li>
</ul>
<hr />
<h2 id="004-commands-key-learning-outcomes">Key Learning Outcomes<a class="headerlink" href="#004-commands-key-learning-outcomes" title="Permanent link">&para;</a></h2>
<p>After mastering these commands, you will be able to:</p>
<ul>
<li><strong>Manage Application Lifecycle</strong>: Start, stop, and restart multi-container applications efficiently</li>
<li><strong>Debug and Monitor</strong>: Access logs, execute commands, and troubleshoot issues in running containers</li>
<li><strong>Development Workflow</strong>: Integrate <code>Docker Compose</code> into your daily development routine</li>
<li><strong>Build Management</strong>: Handle image building and updates effectively</li>
<li><strong>Production Operations</strong>: Perform maintenance and updates on running applications</li>
</ul></section><section class="print-page" id="005-compose-2helm" heading-number="2.6"><h1 id="005-compose-2helm-how-to-create-and-use-a-helm-chart">How to Create and Use a Helm Chart<a class="headerlink" href="#005-compose-2helm-how-to-create-and-use-a-helm-chart" title="Permanent link">&para;</a></h1>
<ul>
<li><code>Helm</code> is a powerful package manager for <code>Kubernetes</code> that simplifies the deployment and management of applications.</li>
<li>This lab will walk you through the process of creating and using a <code>Helm</code> chart.</li>
</ul>
<hr />
<h2 id="005-compose-2helm-prerequisites">Prerequisites<a class="headerlink" href="#005-compose-2helm-prerequisites" title="Permanent link">&para;</a></h2>
<p>Before you begin, ensure you have the following installed:</p>
<ol>
<li><strong><code>Kubernetes</code> Cluster</strong>: A running <code>Kubernetes</code> cluster.</li>
<li><strong><code>Helm</code></strong>: Installed and configured. You can install <code>Helm</code> by following the <a href="https://helm.sh/docs/intro/install/">official Helm installation guide</a>.</li>
<li><strong><code>kubectl</code></strong>: Installed and configured to interact with your <code>Kubernetes</code> cluster.</li>
<li><code>Docker</code> and <code>Docker Compose</code> installed.</li>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>, <a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a>, <a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a>).</li>
</ol>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and `Docker Compose` are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="005-compose-2helm-step-1-create-a-new-helm-chart">Step 1: Create a New Helm Chart<a class="headerlink" href="#005-compose-2helm-step-1-create-a-new-helm-chart" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Navigate to the directory where you want to create the <code>Helm</code> chart:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#005-compose-2helm-__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>/path/to/your/directory
</span></code></pre></div>
</li>
<li>
<p>Use the <code>helm create</code> command to template a new <code>Helm</code> chart:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#005-compose-2helm-__codelineno-1-1"></a>helm<span class="w"> </span>create<span class="w"> </span>my-chart
</span></code></pre></div>
<p>This will create a directory structure for your chart, including default templates and configuration files.</p>
</li>
</ol>
<hr />
<h2 id="005-compose-2helm-step-2-customize-the-chart">Step 2: Customize the Chart<a class="headerlink" href="#005-compose-2helm-step-2-customize-the-chart" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Edit <code>values.yaml</code>:</strong></p>
<ul>
<li>Open the <code>values.yaml</code> file in the chart directory.</li>
<li>Define the default values for your application - such as image repository, tag and resource limits.</li>
</ul>
</li>
<li>
<p><strong>Modify Templates:</strong></p>
<ul>
<li>Navigate to the <code>templates/</code> directory.</li>
<li>Edit the YAML files (e.g., <code>deployment.yaml</code> and <code>service.yaml</code>) to define <code>Kubernetes</code> resources for your application.</li>
</ul>
</li>
<li>
<p><strong>Add Configurations:</strong></p>
<ul>
<li>If your application requires additional configurations, add them to the <code>templates/</code> directory or include them in the <code>values.yaml</code> file.</li>
</ul>
</li>
</ol>
<hr />
<h2 id="005-compose-2helm-step-3-pack-the-chart">Step 3: Pack the Chart<a class="headerlink" href="#005-compose-2helm-step-3-pack-the-chart" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Pack the chart in a <code>.tgz</code> file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#005-compose-2helm-__codelineno-2-1"></a>helm<span class="w"> </span>package<span class="w"> </span>my-chart
</span></code></pre></div>
<p>This creates a compressed file that can be shared.</p>
</li>
<li>
<p>Optionally, you can upload the packaged chart to a <code>Helm</code> repository for distribution.</p>
</li>
</ol>
<hr />
<h2 id="005-compose-2helm-step-4-deploy-the-chart">Step 4: Deploy the Chart<a class="headerlink" href="#005-compose-2helm-step-4-deploy-the-chart" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Install the chart in your <code>Kubernetes</code> cluster:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#005-compose-2helm-__codelineno-3-1"></a>helm<span class="w"> </span>install<span class="w"> </span>my-release<span class="w"> </span>./my-chart
</span></code></pre></div>
<p>Replace <code>my-release</code> with a name for your release and <code>./my-chart</code> with the path to your chart.</p>
</li>
<li>
<p>Verify the deployment:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#005-compose-2helm-__codelineno-4-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>all
</span></code></pre></div>
<p>Ensure all resources are created and running as expected.</p>
</li>
</ol>
<hr />
<h2 id="005-compose-2helm-step-5-upgrade-and-manage-the-chart">Step 5: Upgrade and Manage the Chart<a class="headerlink" href="#005-compose-2helm-step-5-upgrade-and-manage-the-chart" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Upgrade the Release:</strong></p>
<ul>
<li>Modify the chart or <code>values.yaml</code> as needed.</li>
<li>Apply the changes:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#005-compose-2helm-__codelineno-5-1"></a>helm<span class="w"> </span>upgrade<span class="w"> </span>my-release<span class="w"> </span>./my-chart
</span></code></pre></div>
</li>
<li>
<p><strong>Rollback Changes:</strong></p>
<ul>
<li>If something goes wrong, rollback to a previous version:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#005-compose-2helm-__codelineno-6-1"></a>helm<span class="w"> </span>rollback<span class="w"> </span>my-release<span class="w"> </span><span class="m">1</span>
</span></code></pre></div>
<p>Replace <code>1</code> with the desired revision number.</p>
</li>
<li>
<p><strong>Uninstall the Release:</strong></p>
<ul>
<li>To remove the release and its resources:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#005-compose-2helm-__codelineno-7-1"></a>helm<span class="w"> </span>uninstall<span class="w"> </span>my-release
</span></code></pre></div>
</li>
</ol>
<hr />
<h2 id="005-compose-2helm-step-6-pass-values-to-the-helm-chart">Step 6: Pass Values to the Helm Chart<a class="headerlink" href="#005-compose-2helm-step-6-pass-values-to-the-helm-chart" title="Permanent link">&para;</a></h2>
<p>Helm allows you to override default values defined in the <code>values.yaml</code> file by passing custom values during installation or upgrade. This is useful for customizing deployments without modifying the chart itself.</p>
<ol>
<li>
<p><strong>Pass Values via Command Line:</strong></p>
<ul>
<li>Use the <code>--set</code> flag to specify values directly in the command:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#005-compose-2helm-__codelineno-8-1"></a>helm<span class="w"> </span>install<span class="w"> </span>my-release<span class="w"> </span>./my-chart<span class="w"> </span>--set<span class="w"> </span><span class="nv">key1</span><span class="o">=</span>value1,key2<span class="o">=</span>value2
</span></code></pre></div>
<p>Example:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#005-compose-2helm-__codelineno-9-1"></a>helm<span class="w"> </span>install<span class="w"> </span>my-release<span class="w"> </span>./my-chart<span class="w"> </span>--set<span class="w"> </span>image.tag<span class="o">=</span><span class="m">1</span>.2.3,replicaCount<span class="o">=</span><span class="m">3</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Use a Custom Values File:</strong></p>
<ul>
<li>Create a custom YAML file (e.g., <code>custom-values.yaml</code>) with the values you want to override:</li>
</ul>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#005-compose-2helm-__codelineno-10-1"></a><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#005-compose-2helm-__codelineno-10-2"></a><span class="nt">image</span><span class="p">:</span>
</span></code></pre></div>
</li>
<li>
<p>Use the <code>helm create</code> command to template a new <code>Helm</code> chart:
      <div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#005-compose-2helm-__codelineno-11-1"></a>helm<span class="w"> </span>create<span class="w"> </span>my-chart
</span></code></pre></div></p>
</li>
<li>
<p>Pass the file using the <code>-f</code> flag:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#005-compose-2helm-__codelineno-12-1"></a>helm<span class="w"> </span>install<span class="w"> </span>my-release<span class="w"> </span>./my-chart<span class="w"> </span>-f<span class="w"> </span>custom-values.yaml
</span></code></pre></div>
</li>
<li>
<p><strong>Combine Multiple Methods:</strong></p>
<ul>
<li>You can combine the <code>--set</code> flag and custom values file. The <code>--set</code> values take precedence over the file:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#005-compose-2helm-__codelineno-13-1"></a>helm<span class="w"> </span>install<span class="w"> </span>my-release<span class="w"> </span>./my-chart<span class="w"> </span>-f<span class="w"> </span>custom-values.yaml<span class="w"> </span>--set<span class="w"> </span><span class="nv">replicaCount</span><span class="o">=</span><span class="m">5</span>
</span></code></pre></div>
<ul>
<li>This allows you to customize your <code>Helm</code> chart deployments flexibly, adapting to different environments or requirements without modifying the chart itself.</li>
</ul>
</li>
</ol></section><section class="print-page" id="006-compose-advanced" heading-number="2.7"><h1 id="006-compose-advanced-advanced-docker-compose-configuration">Advanced Docker Compose Configuration<a class="headerlink" href="#006-compose-advanced-advanced-docker-compose-configuration" title="Permanent link">&para;</a></h1>
<p>This lab demonstrates advanced <code>Docker Compose</code> features including the <code>extends</code> functionality, <code>YAML anchors</code> and modular service definitions for a complete monitoring stack.</p>
<hr />
<h2 id="006-compose-advanced-description">Description<a class="headerlink" href="#006-compose-advanced-description" title="Permanent link">&para;</a></h2>
<p>This lab showcases two different approaches to creating a comprehensive monitoring and management stack using <code>Docker Compose</code>:</p>
<ol>
<li><strong><code>docker-compose.yaml</code></strong> - Demonstrates the <code>extends</code> feature for modular service definitions.</li>
<li><strong><code>docker-compose-v1.yaml</code></strong> - Shows <code>YAML anchors</code> and aliases for DRY (Do not Repeat Yourself) configuration.</li>
</ol>
<hr />
<h2 id="006-compose-advanced-prerequisites">Prerequisites<a class="headerlink" href="#006-compose-advanced-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Docker and <code>Docker Compose</code> installed</li>
<li>Basic understanding of <code>Docker Compose</code> concepts</li>
<li>Optional but helpful: familiarity with monitoring tools such as <code>Grafana</code>, <code>Prometheus</code>, and <code>Loki</code></li>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>, <a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a>, <a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a>, <a href="#dockercomposelabs-005-compose-network" target="_blank">005 - Compose-to- Helm</a>).</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and `Docker Compose` are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="006-compose-advanced-services-overview">Services Overview<a class="headerlink" href="#006-compose-advanced-services-overview" title="Permanent link">&para;</a></h2>
<p>The monitoring stack includes the following services:</p>
<h3 id="006-compose-advanced-1-grafana">1. <strong>Grafana</strong><a class="headerlink" href="#006-compose-advanced-1-grafana" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Data visualization and monitoring dashboard</li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/grafana.yaml</code></li>
<li><strong>Access</strong>: Web-based dashboard for metrics visualization</li>
</ul>
<h3 id="006-compose-advanced-2-loki">2. <strong>Loki</strong><a class="headerlink" href="#006-compose-advanced-2-loki" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Log aggregation system for centralized logging</li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/loki.yaml</code></li>
<li><strong>Integration</strong>: Works with Grafana for log visualization</li>
</ul>
<h3 id="006-compose-advanced-3-node-exporter">3. <strong>Node Exporter</strong><a class="headerlink" href="#006-compose-advanced-3-node-exporter" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Hardware and OS metrics exporter for <code>Prometheus</code></li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/node-exporter.yaml</code></li>
<li><strong>Function</strong>: Collects system-level metrics</li>
</ul>
<h3 id="006-compose-advanced-4-portainer">4. <strong>Portainer</strong><a class="headerlink" href="#006-compose-advanced-4-portainer" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: <code>Docker</code> container management web interface</li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/portainer.yaml</code></li>
<li><strong>Access</strong>: Web UI for <code>`Docker</code> management</li>
</ul>
<h3 id="006-compose-advanced-5-prometheus">5. <strong>Prometheus</strong><a class="headerlink" href="#006-compose-advanced-5-prometheus" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Time-series metrics collection and monitoring system</li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/prometheus.yaml</code></li>
<li><strong>Function</strong>: Central metrics collection and alerting</li>
</ul>
<h3 id="006-compose-advanced-6-server">6. <strong>Server</strong><a class="headerlink" href="#006-compose-advanced-6-server" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Custom application server</li>
<li><strong>Configuration</strong>: Extends from <code>../../resources/compose/server.yaml</code></li>
<li><strong>Function</strong>: Demo application for monitoring</li>
</ul>
<hr />
<h2 id="006-compose-advanced-key-features-demonstrated">Key Features Demonstrated<a class="headerlink" href="#006-compose-advanced-key-features-demonstrated" title="Permanent link">&para;</a></h2>
<h3 id="006-compose-advanced-docker-compose-extends-feature"><code>Docker Compose extends</code> Feature<a class="headerlink" href="#006-compose-advanced-docker-compose-extends-feature" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Modularity</strong>: Service definitions are split into separate YAML files</li>
<li><strong>Reusability</strong>: Base configurations can be shared across environments</li>
<li><strong>Maintainability</strong>: Changes to base services affect all environments</li>
</ul>
<h3 id="006-compose-advanced-yaml-anchors-and-aliases-v1-file">YAML Anchors and Aliases (v1 file)<a class="headerlink" href="#006-compose-advanced-yaml-anchors-and-aliases-v1-file" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>DRY Principle</strong>: Common configuration defined once with <code>x-common-config</code> extension</li>
<li><strong>Consistency</strong>: All services share the same network and environment settings</li>
<li><strong>Efficiency</strong>: Reduces repetition and potential for configuration drift</li>
</ul>
<h3 id="006-compose-advanced-external-configuration">External Configuration<a class="headerlink" href="#006-compose-advanced-external-configuration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Environment Files</strong>: Shared <code>.env</code> file for environment variables</li>
<li><strong>Network Configuration</strong>: Custom bridge network for service communication</li>
<li><strong>Volume Management</strong>: Named volumes for persistent data storage</li>
</ul>
<h3 id="006-compose-advanced-volumes">Volumes<a class="headerlink" href="#006-compose-advanced-volumes" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>portainer_data</code></strong>: Local volume for Portainer configuration and data persistence</li>
</ul>
<h3 id="006-compose-advanced-networks">Networks<a class="headerlink" href="#006-compose-advanced-networks" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>app_network</code></strong> (v1 only): Custom bridge network enabling isolated service communication</li>
</ul>
<hr />
<h2 id="006-compose-advanced-usage">Usage<a class="headerlink" href="#006-compose-advanced-usage" title="Permanent link">&para;</a></h2>
<h3 id="006-compose-advanced-running-the-standard-configuration">Running the Standard Configuration<a class="headerlink" href="#006-compose-advanced-running-the-standard-configuration" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#006-compose-advanced-__codelineno-0-1"></a><span class="c1"># Start all services</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#006-compose-advanced-__codelineno-0-2"></a>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#006-compose-advanced-__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#006-compose-advanced-__codelineno-0-4"></a><span class="c1"># View logs</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#006-compose-advanced-__codelineno-0-5"></a>docker-compose<span class="w"> </span>logs<span class="w"> </span>-f
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#006-compose-advanced-__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#006-compose-advanced-__codelineno-0-7"></a><span class="c1"># Stop services</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#006-compose-advanced-__codelineno-0-8"></a>docker-compose<span class="w"> </span>down
</span></code></pre></div>
<h3 id="006-compose-advanced-running-the-yaml-anchors-version">Running the YAML Anchors Version<a class="headerlink" href="#006-compose-advanced-running-the-yaml-anchors-version" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#006-compose-advanced-__codelineno-1-1"></a><span class="c1"># Start with the alternative configuration</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#006-compose-advanced-__codelineno-1-2"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose-v1.yaml<span class="w"> </span>up<span class="w"> </span>-d
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#006-compose-advanced-__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#006-compose-advanced-__codelineno-1-4"></a><span class="c1"># Stop services</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#006-compose-advanced-__codelineno-1-5"></a>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker-compose-v1.yaml<span class="w"> </span>down
</span></code></pre></div>
<h3 id="006-compose-advanced-running-the-demo-script">Running the Demo Script<a class="headerlink" href="#006-compose-advanced-running-the-demo-script" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#006-compose-advanced-__codelineno-2-1"></a><span class="c1"># Execute the provided demo script</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#006-compose-advanced-__codelineno-2-2"></a>./demo.sh
</span></code></pre></div>
<hr />
<h2 id="006-compose-advanced-lab-file-structure">Lab File Structure<a class="headerlink" href="#006-compose-advanced-lab-file-structure" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#006-compose-advanced-__codelineno-3-1"></a>006-Compose-Advanced/
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#006-compose-advanced-__codelineno-3-2"></a>â”œâ”€â”€ docker-compose.yaml          # Main compose file using extends
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#006-compose-advanced-__codelineno-3-3"></a>â”œâ”€â”€ docker-compose-v1.yaml       # Alternative using YAML anchors
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#006-compose-advanced-__codelineno-3-4"></a>â”œâ”€â”€ demo.sh                      # Demo script
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#006-compose-advanced-__codelineno-3-5"></a>â””â”€â”€ README.md                    # Current file
</span></code></pre></div>
<hr />
<h2 id="006-compose-advanced-lab-exercises">Lab Exercises<a class="headerlink" href="#006-compose-advanced-lab-exercises" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Compare Configurations</strong>: Study both <code>Docker Compose</code> files and identify the differences in approach.</li>
<li><strong>Modify Services</strong>: Try adding a new service to both files and observe the configuration differences.</li>
<li><strong>Environment Variables</strong>: Explore the shared environment file and understand variable inheritance.</li>
<li><strong>Network Communication</strong>: Test inter-service communication within the custom network.</li>
<li><strong>Volume Persistence</strong>: Verify that <code>Portainer</code> data persists across container restarts.</li>
</ol>
<hr />
<h2 id="006-compose-advanced-learning-outcomes">Learning Outcomes<a class="headerlink" href="#006-compose-advanced-learning-outcomes" title="Permanent link">&para;</a></h2>
<p>After completing this lab, you will understand:</p>
<ul>
<li>How to use <code>Docker Compose extends</code> for modular configurations.</li>
<li><code>YAML anchors</code> and aliases for reducing configuration repetition.</li>
<li>Best practices for organizing complex multi-service applications.</li>
<li>Environment variable management in <code>Docker Compose</code>.</li>
<li>Network and volume configuration for production-like setups.</li>
</ul></section><section class="print-page" id="007-watch" heading-number="2.8"><h1 id="007-watch-docker-compose-watch">Docker Compose Watch<a class="headerlink" href="#007-watch-docker-compose-watch" title="Permanent link">&para;</a></h1>
<p><code>Docker Compose Watch</code> is a powerful tool for monitoring changes in your <code>Docker Compose</code> setup and automatically rebuilding or restarting services when changes are detected. </p>
<p>This lab demonstrates how to implement and use <code>Docker Compose Watch</code> for streamlined development workflows.</p>
<hr />
<h2 id="007-watch-description">Description<a class="headerlink" href="#007-watch-description" title="Permanent link">&para;</a></h2>
<p>This lab explores <code>Docker Compose Watch</code> functionality, which observes changes in project files such as <code>Dockerfile</code>, <code>docker-compose.yaml</code> - application code - and triggers automated actions like rebuilding images or restarting containers. This is particularly valuable in development environments where frequent code changes occur.</p>
<hr />
<h2 id="007-watch-prerequisites">Prerequisites<a class="headerlink" href="#007-watch-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker</code> and <code>Docker Compose</code> installed.</li>
<li>Basic understanding of <code>Docker Compose</code> concepts.</li>
<li>Familiarity with file watching concepts.</li>
<li>Linux/macOS environment (for inotify-tools examples)</li>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>, <a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a>, <a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a>, <a href="#dockercomposelabs-005-compose-network" target="_blank">005 - Compose-to- Helm</a>, <a href="#dockercomposelabs-006-compose-advanced" target="_blank">006 - Compose-Advanced</a>).</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and `Docker Compose` are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="007-watch-what-is-docker-compose-watch">What is <code>Docker Compose Watch</code>?<a class="headerlink" href="#007-watch-what-is-docker-compose-watch" title="Permanent link">&para;</a></h2>
<p><code>Docker Compose Watch</code> is a mechanism for monitoring file system changes which automatically triggers container rebuilds or restarts. It eliminates the need for manual intervention when iterating on containerized applications, significantly improving development efficiency.</p>
<hr />
<h2 id="007-watch-key-benefits">Key Benefits<a class="headerlink" href="#007-watch-key-benefits" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Efficiency</strong>: Automates rebuilding and restarting processes.</li>
<li><strong>Consistency</strong>: Ensures changes are immediately reflected in containers.</li>
<li><strong>Productivity</strong>: Allows developers to focus on coding instead of container management.</li>
<li><strong>Reduced Downtime</strong>: Minimizes delays through automatic service restarts.</li>
<li><strong>Improved Feedback Loop</strong>: Provides immediate reflection of changes.</li>
</ul>
<hr />
<h2 id="007-watch-use-cases">Use Cases:<a class="headerlink" href="#007-watch-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="007-watch-1-web-application-development">1. Web Application Development<a class="headerlink" href="#007-watch-1-web-application-development" title="Permanent link">&para;</a></h3>
<p>Automatically reloads applications when code changes are detected in source files.</p>
<h3 id="007-watch-2-microservices-development">2. Microservices Development<a class="headerlink" href="#007-watch-2-microservices-development" title="Permanent link">&para;</a></h3>
<p>Keeps multiple services synchronized during development cycles.</p>
<h3 id="007-watch-3-configuration-management">3. Configuration Management<a class="headerlink" href="#007-watch-3-configuration-management" title="Permanent link">&para;</a></h3>
<p>Applies configuration file changes without requiring manual restarts.</p>
<h3 id="007-watch-4-rapid-testing">4. Rapid Testing<a class="headerlink" href="#007-watch-4-rapid-testing" title="Permanent link">&para;</a></h3>
<p>Facilitates quick testing of changes in isolated container environments.</p>
<hr />
<h2 id="007-watch-implementation-examples">Implementation Examples<a class="headerlink" href="#007-watch-implementation-examples" title="Permanent link">&para;</a></h2>
<h3 id="007-watch-example-1-basic-application-code-watching">Example 1: Basic Application Code Watching<a class="headerlink" href="#007-watch-example-1-basic-application-code-watching" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#007-watch-__codelineno-0-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#007-watch-__codelineno-0-2"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#007-watch-__codelineno-0-3"></a><span class="w">  </span><span class="nt">app</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#007-watch-__codelineno-0-4"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#007-watch-__codelineno-0-5"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#007-watch-__codelineno-0-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app:/usr/src/app</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#007-watch-__codelineno-0-7"></a><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm start</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#007-watch-__codelineno-0-8"></a><span class="w">    </span><span class="nt">develop</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#007-watch-__codelineno-0-9"></a><span class="w">      </span><span class="nt">watch</span><span class="p">:</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#007-watch-__codelineno-0-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rebuild</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#007-watch-__codelineno-0-11"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./package.json</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#007-watch-__codelineno-0-12"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sync</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#007-watch-__codelineno-0-13"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#007-watch-__codelineno-0-14"></a><span class="w">          </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/src/app</span>
</span></code></pre></div>
<h3 id="007-watch-example-2-configuration-file-watching">Example 2: Configuration File Watching<a class="headerlink" href="#007-watch-example-2-configuration-file-watching" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#007-watch-__codelineno-1-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#007-watch-__codelineno-1-2"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#007-watch-__codelineno-1-3"></a><span class="w">  </span><span class="nt">app</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#007-watch-__codelineno-1-4"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#007-watch-__codelineno-1-5"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#007-watch-__codelineno-1-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config:/usr/src/app/config</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#007-watch-__codelineno-1-7"></a><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm start</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#007-watch-__codelineno-1-8"></a><span class="w">    </span><span class="nt">develop</span><span class="p">:</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#007-watch-__codelineno-1-9"></a><span class="w">      </span><span class="nt">watch</span><span class="p">:</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#007-watch-__codelineno-1-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">restart</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#007-watch-__codelineno-1-11"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config</span>
</span></code></pre></div>
<h3 id="007-watch-example-3-multi-service-watch-setup">Example 3: Multi-Service Watch Setup<a class="headerlink" href="#007-watch-example-3-multi-service-watch-setup" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#007-watch-__codelineno-2-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#007-watch-__codelineno-2-2"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#007-watch-__codelineno-2-3"></a><span class="w">  </span><span class="nt">frontend</span><span class="p">:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#007-watch-__codelineno-2-4"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./frontend</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#007-watch-__codelineno-2-5"></a><span class="w">    </span><span class="nt">develop</span><span class="p">:</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#007-watch-__codelineno-2-6"></a><span class="w">      </span><span class="nt">watch</span><span class="p">:</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#007-watch-__codelineno-2-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sync</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#007-watch-__codelineno-2-8"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./frontend/src</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#007-watch-__codelineno-2-9"></a><span class="w">          </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/src</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#007-watch-__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#007-watch-__codelineno-2-11"></a><span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#007-watch-__codelineno-2-12"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./backend</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#007-watch-__codelineno-2-13"></a><span class="w">    </span><span class="nt">develop</span><span class="p">:</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#007-watch-__codelineno-2-14"></a><span class="w">      </span><span class="nt">watch</span><span class="p">:</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#007-watch-__codelineno-2-15"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rebuild</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#007-watch-__codelineno-2-16"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./backend/requirements.txt</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#007-watch-__codelineno-2-17"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sync</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#007-watch-__codelineno-2-18"></a><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./backend/app</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#007-watch-__codelineno-2-19"></a><span class="w">          </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app</span>
</span></code></pre></div>
<hr />
<h2 id="007-watch-demo-file-watching-with-python">Demo: File Watching with Python<a class="headerlink" href="#007-watch-demo-file-watching-with-python" title="Permanent link">&para;</a></h2>
<h3 id="007-watch--bash-script-watch_demosh">- Bash Script (<code>watch_demo.sh</code>)<a class="headerlink" href="#007-watch--bash-script-watch_demosh" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#007-watch-__codelineno-3-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#007-watch-__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#007-watch-__codelineno-3-3"></a><span class="c1"># Initialize the counter file</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#007-watch-__codelineno-3-4"></a><span class="nv">counter_file</span><span class="o">=</span><span class="s2">&quot;counter.txt&quot;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#007-watch-__codelineno-3-5"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$counter_file</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#007-watch-__codelineno-3-6"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$counter_file</span><span class="s2">&quot;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#007-watch-__codelineno-3-7"></a><span class="k">fi</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#007-watch-__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#007-watch-__codelineno-3-9"></a><span class="c1"># Watch for changes in the counter file</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#007-watch-__codelineno-3-10"></a><span class="k">while</span><span class="w"> </span>inotifywait<span class="w"> </span>-e<span class="w"> </span>modify<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$counter_file</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#007-watch-__codelineno-3-11"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Change detected in </span><span class="nv">$counter_file</span><span class="s2">. Running Python script...&quot;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#007-watch-__codelineno-3-12"></a><span class="w">  </span>python3<span class="w"> </span>print_counter.py
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#007-watch-__codelineno-3-13"></a><span class="k">done</span>
</span></code></pre></div>
<h3 id="007-watch--python-script-print_counterpy">- Python Script (<code>print_counter.py</code>)<a class="headerlink" href="#007-watch--python-script-print_counterpy" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#007-watch-__codelineno-4-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#007-watch-__codelineno-4-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#007-watch-__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#007-watch-__codelineno-4-4"></a><span class="c1"># Specify the counter file</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#007-watch-__codelineno-4-5"></a><span class="n">counter_file</span> <span class="o">=</span> <span class="s1">&#39;counter.txt&#39;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#007-watch-__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#007-watch-__codelineno-4-7"></a><span class="c1"># Infinite loop to print the version and sleep for 3 seconds</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#007-watch-__codelineno-4-8"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#007-watch-__codelineno-4-9"></a>    <span class="c1"># Check if the file exists</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#007-watch-__codelineno-4-10"></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">counter_file</span><span class="p">):</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#007-watch-__codelineno-4-11"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">counter_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#007-watch-__codelineno-4-12"></a>            <span class="n">counter</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#007-watch-__codelineno-4-13"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current counter value: </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#007-watch-__codelineno-4-14"></a>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#007-watch-__codelineno-4-15"></a>        <span class="c1"># Increment the counter and write back to the file</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#007-watch-__codelineno-4-16"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">counter_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#007-watch-__codelineno-4-17"></a>            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#007-watch-__codelineno-4-18"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#007-watch-__codelineno-4-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">counter_file</span><span class="si">}</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">)</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#007-watch-__codelineno-4-20"></a>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#007-watch-__codelineno-4-21"></a>    <span class="c1"># Sleep for 3 seconds</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#007-watch-__codelineno-4-22"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<h2 id="007-watch-tools-for-docker-compose-watch">Tools for <code>Docker Compose Watch</code><a class="headerlink" href="#007-watch-tools-for-docker-compose-watch" title="Permanent link">&para;</a></h2>
<h3 id="007-watch--built-in-docker-compose-watch">- Built-in <code>Docker Compose Watch</code><a class="headerlink" href="#007-watch--built-in-docker-compose-watch" title="Permanent link">&para;</a></h3>
<ul>
<li>Native support in <code>Docker Compose</code>, from version 2.22 and above.</li>
<li>Uses the <code>develop.watch</code> configuration.</li>
<li>Supports <code>sync</code>, <code>rebuild</code> and <code>restart</code> actions.</li>
</ul>
<h3 id="007-watch-external-tools">External Tools<a class="headerlink" href="#007-watch-external-tools" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>docker-compose-watch</code></strong>: Dedicated third-party tool.</li>
<li><strong><code>entr</code></strong>: General-purpose file watcher for triggering <code>Docker</code> commands.</li>
<li><strong><code>inotify-tools</code></strong>: Linux utilities for monitoring file system changes.</li>
<li><strong><code>watchman</code></strong>: Facebook&rsquo;s file watching service.</li>
</ul>
<hr />
<h2 id="007-watch-watch-actions">Watch Actions<a class="headerlink" href="#007-watch-watch-actions" title="Permanent link">&para;</a></h2>
<h3 id="007-watch--sync">- Sync<a class="headerlink" href="#007-watch--sync" title="Permanent link">&para;</a></h3>
<ul>
<li>Synchronizes files between host and container.</li>
<li>Fastest option for code changes.</li>
<li>Ideal for interpreted languages.</li>
</ul>
<h3 id="007-watch--rebuild">- Rebuild<a class="headerlink" href="#007-watch--rebuild" title="Permanent link">&para;</a></h3>
<ul>
<li>Rebuilds the <code>Docker Image</code> when dependencies change.</li>
<li>Used for <code>package.json</code>, <code>requirements.txt</code> changes.</li>
<li>Maintains container state when possible.</li>
</ul>
<h3 id="007-watch--restart">- Restart<a class="headerlink" href="#007-watch--restart" title="Permanent link">&para;</a></h3>
<ul>
<li>Restarts the entire container.</li>
<li>Used for configuration changes.</li>
<li>Most comprehensive yet slowest option.</li>
</ul>
<hr />
<h2 id="007-watch-lab-exercises">Lab Exercises<a class="headerlink" href="#007-watch-lab-exercises" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Basic Setup</strong>: Create a simple web application with <code>Docker Compose Watch</code>.</li>
<li><strong>Multi-Action Watch</strong>: Configure different watch actions for different file types.</li>
<li><strong>Performance Testing</strong>: Compare development speed with and without watch functionality.</li>
<li><strong>Custom Scripting</strong>: Implement custom file watching using bash scripts and inotify.</li>
<li><strong>Troubleshooting</strong>: Practice debugging watch configuration issues.</li>
</ol>
<hr />
<h2 id="007-watch-when-to-use-docker-compose-watch">When to Use <code>Docker Compose Watch</code><a class="headerlink" href="#007-watch-when-to-use-docker-compose-watch" title="Permanent link">&para;</a></h2>
<p><code>Docker Compose Watch</code> is ideal for:</p>
<ul>
<li>Development environments with frequent code changes.</li>
<li>Projects with complex multi-service dependencies.</li>
<li>Teams requiring rapid collaboration and testing.</li>
<li>Applications with mixed programming languages.</li>
<li>Scenarios requiring immediate feedback on changes.</li>
</ul>
<hr />
<h2 id="007-watch-usage">Usage<a class="headerlink" href="#007-watch-usage" title="Permanent link">&para;</a></h2>
<h3 id="007-watch-sample-files-available">Sample Files Available<a class="headerlink" href="#007-watch-sample-files-available" title="Permanent link">&para;</a></h3>
<p>This lab includes practical sample files:</p>
<ul>
<li><strong><code>docker-compose.yml</code></strong>: Comprehensive example with multiple services and watch configurations.</li>
<li><strong><code>docker-compose-simple.yml</code></strong>: Simplified version focusing on core watch features from README examples.</li>
<li><strong><code>demo.sh</code></strong>: Interactive script that creates a sample project structure and provides usage instructions.</li>
</ul>
<hr />
<h3 id="007-watch-starting-watch-mode">Starting Watch Mode<a class="headerlink" href="#007-watch-starting-watch-mode" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#007-watch-__codelineno-5-1"></a><span class="c1"># Start services with watch enabled</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#007-watch-__codelineno-5-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>watch
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#007-watch-__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#007-watch-__codelineno-5-4"></a><span class="c1"># Start specific services with watch</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#007-watch-__codelineno-5-5"></a>docker<span class="w"> </span>compose<span class="w"> </span>watch<span class="w"> </span><span class="o">[</span>service-name<span class="o">]</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#007-watch-__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#007-watch-__codelineno-5-7"></a><span class="c1"># Combine with other commands</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#007-watch-__codelineno-5-8"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>--watch
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#007-watch-__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#007-watch-__codelineno-5-10"></a><span class="c1"># Use the simple example</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#007-watch-__codelineno-5-11"></a>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>docker-compose-simple.yml<span class="w"> </span>up<span class="w"> </span>--watch
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#007-watch-__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#007-watch-__codelineno-5-13"></a><span class="c1"># Run the demo script to set up a complete example</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#007-watch-__codelineno-5-14"></a>./demo.sh
</span></code></pre></div>
<hr />
<h3 id="007-watch-monitoring-watch-activity">Monitoring Watch Activity<a class="headerlink" href="#007-watch-monitoring-watch-activity" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#007-watch-__codelineno-6-1"></a><span class="c1"># View logs to monitor watch events</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#007-watch-__codelineno-6-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#007-watch-__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#007-watch-__codelineno-6-4"></a><span class="c1"># Check watch configuration</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#007-watch-__codelineno-6-5"></a>docker<span class="w"> </span>compose<span class="w"> </span>config
</span></code></pre></div>
<hr />
<h2 id="007-watch-best-practices">Best Practices<a class="headerlink" href="#007-watch-best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li>Use <code>sync</code> for frequently changing source code.</li>
<li>Use <code>rebuild</code> for dependency files.</li>
<li>Use <code>restart</code> for configuration changes.</li>
<li>Exclude unnecessary files using <code>.dockerignore</code>.</li>
<li>Monitor resource usage during development.</li>
<li>Test watch configuration in team environments.</li>
</ul>
<hr />
<h2 id="007-watch-learning-outcomes">Learning Outcomes<a class="headerlink" href="#007-watch-learning-outcomes" title="Permanent link">&para;</a></h2>
<p>After completing this lab, you will understand:</p>
<ul>
<li>How to configure <code>Docker Compose Watch</code> for different scenarios.</li>
<li>The differences between <code>sync</code>, <code>rebuild</code> and <code>restart</code> actions.</li>
<li>Best practices for optimizing development workflows.</li>
<li>Integration techniques with existing development tools.</li>
<li>Performance considerations and troubleshooting methods.</li>
</ul></section><section class="print-page" id="008-networks" heading-number="2.9"><h1 id="008-networks-docker-compose-multi-network-architecture">Docker Compose Multi-Network Architecture<a class="headerlink" href="#008-networks-docker-compose-multi-network-architecture" title="Permanent link">&para;</a></h1>
<p>This lab demonstrates advanced <code>Docker Compose</code> networking concepts through a comprehensive multi-tier application architecture. You will learn how to design, implement and manage complex network topologies, using multiple custom networks with different configurations.</p>
<hr />
<h2 id="008-networks-description">Description<a class="headerlink" href="#008-networks-description" title="Permanent link">&para;</a></h2>
<p>This lab showcases a production-like microservices architecture with proper network segmentation, security boundaries and service isolation. The example part includes 8 different networks, each serving specific purposes and demonstrating various networking patterns used in enterprise applications.</p>
<hr />
<h2 id="008-networks-prerequisites">Prerequisites<a class="headerlink" href="#008-networks-prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Docker</code> and <code>Docker Compose</code> installed.</li>
<li>Basic understanding of <code>Docker Compose</code> and <code>Docker</code> networking concepts.</li>
<li>Familiarity with microservices architecture.</li>
<li>Knowledge of network security principles.</li>
<li>Completion of previous labs (<a href="#dockercomposelabs-001-intro" target="_blank">001 - Introduction</a>, <a href="#dockercomposelabs-002-compose-demo" target="_blank">002 - Compose-Demo</a>, <a href="#dockercomposelabs-003-structure" target="_blank">003 - Structure</a>, <a href="#dockercomposelabs-004-commands" target="_blank">004 - Commands</a>, <a href="#dockercomposelabs-005-compose-network" target="_blank">005 - Compose-to- Helm</a>, <a href="#dockercomposelabs-006-compose-advanced" target="_blank">006 - Compose-Advanced</a>, <a href="#dockercomposelabs-007-watch" target="_blank">007 - Watch</a>).</li>
</ul>
<div style="border:2px solid #2196f3; border-radius:8px; padding:1em; margin:1em 0;">
While the labs can be practiced using your local Docker environment, it is recommended to use a cloud-based solution like <b>Google Cloud Shell</b>, in which Docker and `Docker Compose` are pre-installed and ready to use.<br>
<a href="https://console.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/nirgeier/DockerComposeLabs" target="_blank"><img src="https://gstatic.com/cloudssh/images/open-btn.svg" alt="Open in Cloud Shell" /></a>
</div>

<hr />
<h2 id="008-networks-architecture-overview">Architecture Overview<a class="headerlink" href="#008-networks-architecture-overview" title="Permanent link">&para;</a></h2>
<p>The application demonstrates a multi-tier architecture with the following layers:</p>
<h3 id="008-networks--network-architecture-diagram">- Network Architecture Diagram<a class="headerlink" href="#008-networks--network-architecture-diagram" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#008-networks-__codelineno-0-1"></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#008-networks-__codelineno-0-2"></a>â”‚                          DMZ Network                            â”‚
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#008-networks-__codelineno-0-3"></a>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#008-networks-__codelineno-0-4"></a>â”‚  â”‚   Nginx     â”‚                    â”‚      Grafana            â”‚ â”‚
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#008-networks-__codelineno-0-5"></a>â”‚  â”‚  (Proxy)    â”‚                    â”‚   (Monitoring UI)       â”‚ â”‚
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#008-networks-__codelineno-0-6"></a>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#008-networks-__codelineno-0-7"></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#008-networks-__codelineno-0-8"></a>           â”‚                                         â”‚
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#008-networks-__codelineno-0-9"></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#008-networks-__codelineno-0-10"></a>â”‚                     Frontend Network                            â”‚
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#008-networks-__codelineno-0-11"></a>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#008-networks-__codelineno-0-12"></a>â”‚  â”‚  Web App    â”‚                    â”‚   Redis Session         â”‚ â”‚
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#008-networks-__codelineno-0-13"></a>â”‚  â”‚ (Frontend)  â”‚                    â”‚      Store              â”‚ â”‚
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#008-networks-__codelineno-0-14"></a>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#008-networks-__codelineno-0-15"></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#008-networks-__codelineno-0-16"></a>           â”‚
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#008-networks-__codelineno-0-17"></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#008-networks-__codelineno-0-18"></a>â”‚                     Backend Network                             â”‚
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#008-networks-__codelineno-0-19"></a>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#008-networks-__codelineno-0-20"></a>â”‚  â”‚ API Gateway â”‚                                                â”‚
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#008-networks-__codelineno-0-21"></a>â”‚  â”‚  (Router)   â”‚                                                â”‚
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#008-networks-__codelineno-0-22"></a>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#008-networks-__codelineno-0-23"></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#008-networks-__codelineno-0-24"></a>           â”‚
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#008-networks-__codelineno-0-25"></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#008-networks-__codelineno-0-26"></a>â”‚                    Services Network                             â”‚
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#008-networks-__codelineno-0-27"></a>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#008-networks-__codelineno-0-28"></a>â”‚  â”‚User Service â”‚  â”‚Order Serviceâ”‚  â”‚  Notification Service    â”‚ â”‚
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#008-networks-__codelineno-0-29"></a>â”‚  â”‚   (API)     â”‚  â”‚    (API)    â”‚  â”‚        (API)             â”‚ â”‚
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#008-networks-__codelineno-0-30"></a>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#008-networks-__codelineno-0-31"></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#008-networks-__codelineno-0-32"></a>     â”‚         â”‚                â”‚                    â”‚
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#008-networks-__codelineno-0-33"></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#008-networks-__codelineno-0-34"></a>â”‚ Database â”‚ â”‚              Messaging Network                      â”‚
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#008-networks-__codelineno-0-35"></a>â”‚ Network  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#008-networks-__codelineno-0-36"></a>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚  RabbitMQ   â”‚                                    â”‚
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#008-networks-__codelineno-0-37"></a>â”‚ â”‚Redis â”‚ â”‚ â”‚  â”‚ (Message    â”‚                                    â”‚
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#008-networks-__codelineno-0-38"></a>â”‚ â”‚Cache â”‚ â”‚ â”‚  â”‚   Queue)    â”‚                                    â”‚
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#008-networks-__codelineno-0-39"></a>â”‚ â”‚      â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#008-networks-__codelineno-0-40"></a>â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#008-networks-__codelineno-0-41"></a>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚              â”‚
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#008-networks-__codelineno-0-42"></a>â”‚ â”‚Post  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#008-networks-__codelineno-0-43"></a>â”‚ â”‚greSQLâ”‚ â”‚ â”‚             External Network                        â”‚
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#008-networks-__codelineno-0-44"></a>â”‚ â”‚  DBs â”‚ â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#008-networks-__codelineno-0-45"></a>â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚   MailHog   â”‚                                    â”‚
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#008-networks-__codelineno-0-46"></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚   (SMTP)    â”‚                                    â”‚
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#008-networks-__codelineno-0-47"></a>             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#008-networks-__codelineno-0-48"></a>             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre></div>
<hr />
<h2 id="008-networks-network-definitions">Network Definitions<a class="headerlink" href="#008-networks-network-definitions" title="Permanent link">&para;</a></h2>
<h3 id="008-networks-1-frontend-network-172200024">1. <strong>Frontend Network</strong> (<code>172.20.0.0/24</code>)<a class="headerlink" href="#008-networks-1-frontend-network-172200024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Public-facing services and user interfaces.</li>
<li><strong>Services</strong>: Web Application, <code>Nginx</code> Proxy, <code>Redis</code> Session Store.</li>
<li><strong>Security</strong>: Medium - handles user traffic.</li>
<li><strong>Characteristics</strong>: Bridge network with ICC enabled.</li>
</ul>
<h3 id="008-networks-2-backend-network-172210024">2. <strong>Backend Network</strong> (<code>172.21.0.0/24</code>)<a class="headerlink" href="#008-networks-2-backend-network-172210024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Application logic and API gateway.</li>
<li><strong>Services</strong>: API Gateway, Web Application (as client).</li>
<li><strong>Security</strong>: High - internal application communication.</li>
<li><strong>Characteristics</strong>: Bridge network for API routing.</li>
</ul>
<h3 id="008-networks-3-services-network-172220024">3. <strong>Services Network</strong> (<code>172.22.0.0/24</code>)<a class="headerlink" href="#008-networks-3-services-network-172220024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Microservices inter-communication.</li>
<li><strong>Services</strong>: User Service, Order Service, Notification Service, API Gateway, <code>Redis</code> Cache and <code>Prometheus</code>.</li>
<li><strong>Security</strong>: High - business logic isolation.</li>
<li><strong>Characteristics</strong>: Internal service mesh communication.</li>
</ul>
<h3 id="008-networks-4-database-network-172230024">4. <strong>Database Network</strong> (<code>172.23.0.0/24</code>)<a class="headerlink" href="#008-networks-4-database-network-172230024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Data persistence and cache layer.</li>
<li><strong>Services</strong>: <code>PostgreSQL</code> Primary/Secondary, <code>Redis</code> Cache and Service clients.</li>
<li><strong>Security</strong>: Very High - sensitive data access.</li>
<li><strong>Characteristics</strong>: Restricted access, database-specific.</li>
</ul>
<h3 id="008-networks-5-messaging-network-172240024">5. <strong>Messaging Network</strong> (<code>172.24.0.0/24</code>)<a class="headerlink" href="#008-networks-5-messaging-network-172240024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Asynchronous communication and event streaming.</li>
<li><strong>Services</strong>: <code>RabbitMQ</code>, Order Service and Notification Service.</li>
<li><strong>Security</strong>: High - event-driven architecture.</li>
<li><strong>Characteristics</strong>: Message queue isolation.</li>
</ul>
<h3 id="008-networks-6-external-network-172250024">6. <strong>External Network</strong> (<code>172.25.0.0/24</code>)<a class="headerlink" href="#008-networks-6-external-network-172250024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Third-party services and external APIs.</li>
<li><strong>Services</strong>: <code>MailHog</code> (SMTP) and Notification Service.</li>
<li><strong>Security</strong>: Variable - external service simulation.</li>
<li><strong>Characteristics</strong>: ICC disabled for security.</li>
</ul>
<h3 id="008-networks-7-dmz-network-172260024">7. <strong>DMZ Network</strong> (<code>172.26.0.0/24</code>)<a class="headerlink" href="#008-networks-7-dmz-network-172260024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Demilitarized zone for public access</li>
<li><strong>Services</strong>: Nginx Proxy, Grafana Dashboard</li>
<li><strong>Security</strong>: Medium - public-facing with restrictions</li>
<li><strong>Characteristics</strong>: Controlled public access</li>
</ul>
<h3 id="008-networks-8-monitoring-network-172270024">8. <strong>Monitoring Network</strong> (<code>172.27.0.0/24</code>)<a class="headerlink" href="#008-networks-8-monitoring-network-172270024" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Observability and monitoring services.</li>
<li><strong>Services</strong>: <code>Prometheus</code> and <code>Grafana</code>.</li>
<li><strong>Security</strong>: Medium - monitoring and metrics.</li>
<li><strong>Characteristics</strong>: Cross-network access for metrics collection.</li>
</ul>
<hr />
<h2 id="008-networks-service-architecture">Service Architecture<a class="headerlink" href="#008-networks-service-architecture" title="Permanent link">&para;</a></h2>
<h3 id="008-networks-frontend-tier">Frontend Tier<a class="headerlink" href="#008-networks-frontend-tier" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>Nginx</code></strong>: Reverse proxy and load balancer.</li>
<li><strong>Web Application</strong>: User interface and frontend logic.</li>
<li><strong><code>Redis</code> Session</strong>: Session management and user state.</li>
</ul>
<h3 id="008-networks-api-layer">API Layer<a class="headerlink" href="#008-networks-api-layer" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>API Gateway</strong>: Central routing and service discovery.</li>
<li><strong>Request routing</strong>: Intelligent traffic distribution.</li>
<li><strong>Authentication</strong>: Centralized security enforcement.</li>
</ul>
<h3 id="008-networks-microservices-tier">Microservices Tier<a class="headerlink" href="#008-networks-microservices-tier" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>User Service</strong>: User management and authentication.</li>
<li><strong>Order Service</strong>: Order processing and business logic.</li>
<li><strong>Notification Service</strong>: Email and messaging system.</li>
</ul>
<h3 id="008-networks-data-tier">Data Tier<a class="headerlink" href="#008-networks-data-tier" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>PostgreSQL</code> Primary</strong>: Main application database.</li>
<li><strong><code>PostgreSQL</code> Secondary</strong>: Orders and analytics database.</li>
<li><strong><code>Redis</code> Cache</strong>: Application-level caching.</li>
</ul>
<h3 id="008-networks-infrastructure-services">Infrastructure Services<a class="headerlink" href="#008-networks-infrastructure-services" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>RabbitMQ</code></strong>: Message queue and event streaming.</li>
<li><strong><code>MailHog</code></strong>: SMTP server simulation.</li>
<li><strong><code>Prometheus</code></strong>: Metrics collection and monitoring.</li>
<li><strong><code>Grafana</code></strong>: Visualization and dashboards.</li>
</ul>
<hr />
<h2 id="008-networks-network-security-features">Network Security Features<a class="headerlink" href="#008-networks-network-security-features" title="Permanent link">&para;</a></h2>
<h3 id="008-networks-isolation-strategies">Isolation Strategies<a class="headerlink" href="#008-networks-isolation-strategies" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Network Segmentation</strong>: Services grouped by function and security requirements.</li>
<li><strong>Least Privilege</strong>: Services only access required networks.</li>
<li><strong>DMZ Implementation</strong>: Public services isolated from internal infrastructure.</li>
</ul>
<h3 id="008-networks-security-configurations">Security Configurations<a class="headerlink" href="#008-networks-security-configurations" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#008-networks-__codelineno-1-1"></a><span class="c1"># Example: High-security database network</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#008-networks-__codelineno-1-2"></a><span class="nt">database_network</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#008-networks-__codelineno-1-3"></a><span class="w">  </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#008-networks-__codelineno-1-4"></a><span class="w">  </span><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#008-networks-__codelineno-1-5"></a><span class="w">    </span><span class="nt">com.docker.network.bridge.enable_icc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#008-networks-__codelineno-1-6"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#008-networks-__codelineno-1-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;network.security=high&quot;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#008-networks-__codelineno-1-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;network.description=Database</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">cache</span><span class="nv"> </span><span class="s">services&quot;</span>
</span></code></pre></div>
<h3 id="008-networks-access-control-patterns">Access Control Patterns<a class="headerlink" href="#008-networks-access-control-patterns" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Frontend â†’ Backend</strong>: Web app accesses API gateway.</li>
<li><strong>Backend â†’ Services</strong>: API gateway routes to microservices.</li>
<li><strong>Services â†’ Database</strong>: Direct database access with specific credentials.</li>
<li><strong>Cross-network</strong>: Monitoring services access multiple networks.</li>
</ul>
<hr />
<h2 id="008-networks-network-aliases-and-service-discovery">Network Aliases and Service Discovery<a class="headerlink" href="#008-networks-network-aliases-and-service-discovery" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--service-discovery-examples">- Service Discovery Examples<a class="headerlink" href="#008-networks--service-discovery-examples" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#008-networks-__codelineno-2-1"></a><span class="c1"># Multiple aliases for flexible service discovery</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#008-networks-__codelineno-2-2"></a><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#008-networks-__codelineno-2-3"></a><span class="w">  </span><span class="nt">frontend_network</span><span class="p">:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#008-networks-__codelineno-2-4"></a><span class="w">    </span><span class="nt">aliases</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#008-networks-__codelineno-2-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#008-networks-__codelineno-2-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend-service</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#008-networks-__codelineno-2-7"></a><span class="w">  </span><span class="nt">backend_network</span><span class="p">:</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#008-networks-__codelineno-2-8"></a><span class="w">    </span><span class="nt">aliases</span><span class="p">:</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#008-networks-__codelineno-2-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-client</span>
</span></code></pre></div>
<h3 id="008-networks--benefits-of-aliases">- Benefits of Aliases<a class="headerlink" href="#008-networks--benefits-of-aliases" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Load Balancing</strong>: Multiple names for the same service.</li>
<li><strong>Environment Flexibility</strong>: Different names for different contexts.</li>
<li><strong>Migration Support</strong>: Old and new names during transitions.</li>
<li><strong>Service Mesh</strong>: Consistent naming across networks.</li>
</ul>
<hr />
<h2 id="008-networks-lab-exercises">Lab Exercises<a class="headerlink" href="#008-networks-lab-exercises" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--exercise-1-network-inspection">- Exercise 1: Network Inspection<a class="headerlink" href="#008-networks--exercise-1-network-inspection" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#008-networks-__codelineno-3-1"></a><span class="c1"># List all networks</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#008-networks-__codelineno-3-2"></a>docker<span class="w"> </span>network<span class="w"> </span>ls
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#008-networks-__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#008-networks-__codelineno-3-4"></a><span class="c1"># Inspect a specific network</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#008-networks-__codelineno-3-5"></a>docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span><span class="m">007</span>-networks_frontend_network
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#008-networks-__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#008-networks-__codelineno-3-7"></a><span class="c1"># Check service connectivity</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#008-networks-__codelineno-3-8"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>nginx<span class="w"> </span>ping<span class="w"> </span>web-app
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#008-networks-__codelineno-3-9"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web-app<span class="w"> </span>ping<span class="w"> </span>api-gateway
</span></code></pre></div>
<h3 id="008-networks--exercise-2-service-communication-testing">- Exercise 2: Service Communication Testing<a class="headerlink" href="#008-networks--exercise-2-service-communication-testing" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#008-networks-__codelineno-4-1"></a><span class="c1"># Test cross-network communication</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#008-networks-__codelineno-4-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>api-gateway<span class="w"> </span>curl<span class="w"> </span>http://user-service:8001/health
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#008-networks-__codelineno-4-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>user-service<span class="w"> </span>pg_isready<span class="w"> </span>-h<span class="w"> </span>postgres-primary<span class="w"> </span>-p<span class="w"> </span><span class="m">5432</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#008-networks-__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#008-networks-__codelineno-4-5"></a><span class="c1"># Test network isolation</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#008-networks-__codelineno-4-6"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>nginx<span class="w"> </span>ping<span class="w"> </span>postgres-primary<span class="w">  </span><span class="c1"># Should fail</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#008-networks-__codelineno-4-7"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web-app<span class="w"> </span>ping<span class="w"> </span>redis-cache<span class="w">     </span><span class="c1"># Should fail</span>
</span></code></pre></div>
<h3 id="008-networks--exercise-3-network-security-validation">- Exercise 3: Network Security Validation<a class="headerlink" href="#008-networks--exercise-3-network-security-validation" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#008-networks-__codelineno-5-1"></a><span class="c1"># Check network isolation</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#008-networks-__codelineno-5-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>user-service<span class="w"> </span>nslookup<span class="w"> </span>postgres-secondary<span class="w">  </span><span class="c1"># Should fail</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#008-networks-__codelineno-5-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>order-service<span class="w"> </span>nslookup<span class="w"> </span>redis-session<span class="w">      </span><span class="c1"># Should fail</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#008-networks-__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#008-networks-__codelineno-5-5"></a><span class="c1"># Verify correct access</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#008-networks-__codelineno-5-6"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>user-service<span class="w"> </span>nslookup<span class="w"> </span>postgres-primary<span class="w">    </span><span class="c1"># Should work</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#008-networks-__codelineno-5-7"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>order-service<span class="w"> </span>nslookup<span class="w"> </span>postgres-secondary<span class="w"> </span><span class="c1"># Should work</span>
</span></code></pre></div>
<h3 id="008-networks--exercise-4-monitoring-network-traffic">- Exercise 4: Monitoring Network Traffic<a class="headerlink" href="#008-networks--exercise-4-monitoring-network-traffic" title="Permanent link">&para;</a></h3>
<h2 id="008-networks-monitor-network-activity-docker-exec-prometheus-wget-qo-httpgrafana3000apihealth-docker-exec-grafana-curl-s-httpprometheus9090apiv1targets-check-cross-network-metrics-collection-docker-logs-prometheus-grep-scrape"><div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#008-networks-__codelineno-6-1"></a><span class="c1"># Monitor network activity</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#008-networks-__codelineno-6-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>prometheus<span class="w"> </span>wget<span class="w"> </span>-qO-<span class="w"> </span>http://grafana:3000/api/health
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#008-networks-__codelineno-6-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>grafana<span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>http://prometheus:9090/api/v1/targets
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#008-networks-__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#008-networks-__codelineno-6-5"></a><span class="c1"># Check cross-network metrics collection</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#008-networks-__codelineno-6-6"></a>docker<span class="w"> </span>logs<span class="w"> </span>prometheus<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;scrape&quot;</span>
</span></code></pre></div><a class="headerlink" href="#008-networks-monitor-network-activity-docker-exec-prometheus-wget-qo-httpgrafana3000apihealth-docker-exec-grafana-curl-s-httpprometheus9090apiv1targets-check-cross-network-metrics-collection-docker-logs-prometheus-grep-scrape" title="Permanent link">&para;</a></h2>
<h2 id="008-networks-usage-instructions">Usage Instructions<a class="headerlink" href="#008-networks-usage-instructions" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--starting-the-application">- Starting the Application<a class="headerlink" href="#008-networks--starting-the-application" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#008-networks-__codelineno-7-1"></a><span class="c1"># Start all services</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#008-networks-__codelineno-7-2"></a>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#008-networks-__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#008-networks-__codelineno-7-4"></a><span class="c1"># Start specific tiers</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#008-networks-__codelineno-7-5"></a>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>nginx<span class="w"> </span>web-app<span class="w"> </span>api-gateway
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#008-networks-__codelineno-7-6"></a>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>postgres-primary<span class="w"> </span>postgres-secondary<span class="w"> </span>redis-cache
</span></code></pre></div>
<h3 id="008-networks--monitoring-network-health">- Monitoring Network Health<a class="headerlink" href="#008-networks--monitoring-network-health" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#008-networks-__codelineno-8-1"></a><span class="c1"># Check service status</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#008-networks-__codelineno-8-2"></a>docker-compose<span class="w"> </span>ps
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#008-networks-__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#008-networks-__codelineno-8-4"></a><span class="c1"># View network connectivity</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#008-networks-__codelineno-8-5"></a>docker-compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>nginx<span class="w"> </span>wget<span class="w"> </span>-qO-<span class="w"> </span>http://web-app:3000/health
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#008-networks-__codelineno-8-6"></a>docker-compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>api-gateway<span class="w"> </span>curl<span class="w"> </span>http://user-service:8001/api/status
</span></code></pre></div>
<h3 id="008-networks--accessing-services">- Accessing Services<a class="headerlink" href="#008-networks--accessing-services" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Web Application</strong>: <a href="http://localhost">http://localhost</a> (via Nginx)</li>
<li><strong><code>Grafana</code> Dashboard</strong>: <a href="http://localhost:3000">http://localhost:3000</a></li>
<li><strong><code>Prometheus</code> Metrics</strong>: <a href="http://localhost:9090">http://localhost:9090</a></li>
<li><strong><code>RabbitMQ</code> Management</strong>: <a href="http://localhost:15672">http://localhost:15672</a></li>
<li><strong><code>MailHog</code> Web UI</strong>: <a href="http://localhost:8025">http://localhost:8025</a></li>
</ul>
<hr />
<h2 id="008-networks-network-configuration-details">Network Configuration Details<a class="headerlink" href="#008-networks-network-configuration-details" title="Permanent link">&para;</a></h2>
<h3 id="008-networks-ipam-ip-address-management">IPAM (IP Address Management)<a class="headerlink" href="#008-networks-ipam-ip-address-management" title="Permanent link">&para;</a></h3>
<p>Each network uses a dedicated subnet:</p>
<ul>
<li><strong>Frontend</strong>: <code>172.20.0.0/24</code> (254 addresses)</li>
<li><strong>Backend</strong>: <code>172.21.0.0/24</code> (254 addresses)</li>
<li><strong>Services</strong>: <code>172.22.0.0/24</code> (254 addresses)</li>
<li><strong>Database</strong>: <code>172.23.0.0/24</code> (254 addresses)</li>
<li><strong>Messaging</strong>: <code>172.24.0.0/24</code> (254 addresses)</li>
<li><strong>External</strong>: <code>172.25.0.0/24</code> (254 addresses)</li>
<li><strong>DMZ</strong>: <code>172.26.0.0/24</code> (254 addresses)</li>
<li><strong>Monitoring</strong>: <code>172.27.0.0/24</code> (254 addresses)</li>
</ul>
<h3 id="008-networks-bridge-network-options">Bridge Network Options<a class="headerlink" href="#008-networks-bridge-network-options" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#008-networks-__codelineno-9-1"></a><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#008-networks-__codelineno-9-2"></a><span class="w">  </span><span class="nt">com.docker.network.bridge.name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom-bridge-name&quot;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#008-networks-__codelineno-9-3"></a><span class="w">  </span><span class="nt">com.docker.network.bridge.enable_icc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#008-networks-__codelineno-9-4"></a><span class="w">  </span><span class="nt">com.docker.network.bridge.enable_ip_masquerade</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</span></code></pre></div>
<h3 id="008-networks-network-labels">Network Labels<a class="headerlink" href="#008-networks-network-labels" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#008-networks-__codelineno-10-1"></a><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#008-networks-__codelineno-10-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;network.description=Purpose</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">description&quot;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#008-networks-__codelineno-10-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;network.environment=production&quot;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#008-networks-__codelineno-10-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;network.security=high|medium|low&quot;</span>
</span></code></pre></div>
<hr />
<h2 id="008-networks-troubleshooting">Troubleshooting<a class="headerlink" href="#008-networks-troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--common-network-issues">- Common Network Issues<a class="headerlink" href="#008-networks--common-network-issues" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Service Discovery Failures</strong>: Check network aliases and DNS resolution.</li>
<li><strong>Connection Timeouts</strong>: Verify services are on the same network.</li>
<li><strong>Port Conflicts</strong>: Ensure unique port mappings.</li>
<li><strong>Network Isolation</strong>: Confirm intended network segmentation.</li>
</ol>
<h3 id="008-networks--debugging-commands">- Debugging Commands<a class="headerlink" href="#008-networks--debugging-commands" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#008-networks-__codelineno-11-1"></a><span class="c1"># Network connectivity</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#008-networks-__codelineno-11-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="o">[</span>container<span class="o">]</span><span class="w"> </span>ping<span class="w"> </span><span class="o">[</span>target<span class="o">]</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#008-networks-__codelineno-11-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="o">[</span>container<span class="o">]</span><span class="w"> </span>nslookup<span class="w"> </span><span class="o">[</span>service-name<span class="o">]</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#008-networks-__codelineno-11-4"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="o">[</span>container<span class="o">]</span><span class="w"> </span>netstat<span class="w"> </span>-rn
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#008-networks-__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#008-networks-__codelineno-11-6"></a><span class="c1"># Network inspection</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#008-networks-__codelineno-11-7"></a>docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span><span class="o">[</span>network-name<span class="o">]</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#008-networks-__codelineno-11-8"></a>docker<span class="w"> </span>network<span class="w"> </span>ls<span class="w"> </span>--filter<span class="w"> </span><span class="nv">driver</span><span class="o">=</span>bridge
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#008-networks-__codelineno-11-9"></a>docker<span class="w"> </span>inspect<span class="w"> </span><span class="o">[</span>container<span class="o">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>NetworkMode
</span></code></pre></div>
<h3 id="008-networks--health-checks">- Health Checks<a class="headerlink" href="#008-networks--health-checks" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#008-networks-__codelineno-12-1"></a><span class="c1"># Service health verification</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#008-networks-__codelineno-12-2"></a>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost/health<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Frontend down&quot;</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#008-networks-__codelineno-12-3"></a>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost:3000/api/health<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Grafana down&quot;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#008-networks-__codelineno-12-4"></a>curl<span class="w"> </span>-f<span class="w"> </span>http://localhost:9090/-/healthy<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Prometheus down&quot;</span>
</span></code></pre></div>
<hr />
<h2 id="008-networks-best-practices">Best Practices<a class="headerlink" href="#008-networks-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--network-design">- Network Design<a class="headerlink" href="#008-networks--network-design" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Principle of Least Privilege</strong>: Only connect services to necessary networks.</li>
<li><strong>Defense in Depth</strong>: Multiple layers of network security.</li>
<li><strong>Service Segmentation</strong>: Group services by function and security requirements.</li>
<li><strong>Monitoring Integration</strong>: Ensure observability across all networks.</li>
</ul>
<h3 id="008-networks--security-considerations">- Security Considerations<a class="headerlink" href="#008-networks--security-considerations" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Network Isolation</strong>: Prevent unauthorized cross-network communication.</li>
<li><strong>Service Discovery</strong>: Use meaningful aliases for better organization.</li>
<li><strong>Access Control</strong>: Implement proper authentication and authorization.</li>
<li><strong>Audit Logging</strong>: Monitor and log network access patterns.</li>
</ul>
<h3 id="008-networks--performance-optimization">- Performance Optimization<a class="headerlink" href="#008-networks--performance-optimization" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Network Locality</strong>: Place frequently communicating services on the same network.</li>
<li><strong>Load Distribution</strong>: Use multiple networks to distribute traffic.</li>
<li><strong>Resource Allocation</strong>: Monitor network utilization and adjust as needed.</li>
<li><strong>Connection Pooling</strong>: Implement efficient connection management.</li>
</ul>
<hr />
<h2 id="008-networks-advanced-topics">Advanced Topics<a class="headerlink" href="#008-networks-advanced-topics" title="Permanent link">&para;</a></h2>
<h3 id="008-networks--external-networks">- External Networks<a class="headerlink" href="#008-networks--external-networks" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#008-networks-__codelineno-13-1"></a><span class="c1"># Create external network</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#008-networks-__codelineno-13-2"></a>docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--driver<span class="w"> </span>bridge<span class="w"> </span>production-shared
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#008-networks-__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#008-networks-__codelineno-13-4"></a><span class="c1"># Reference in compose file</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#008-networks-__codelineno-13-5"></a>networks:
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#008-networks-__codelineno-13-6"></a><span class="w">  </span>shared_network:
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#008-networks-__codelineno-13-7"></a><span class="w">    </span>external:<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#008-networks-__codelineno-13-8"></a><span class="w">    </span>name:<span class="w"> </span>production-shared
</span></code></pre></div>
<h3 id="008-networks--network-plugins">- Network Plugins<a class="headerlink" href="#008-networks--network-plugins" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Overlay Networks</strong>: Multi-host networking.</li>
<li><strong>Macvlan Networks</strong>: Direct host network access.</li>
<li><strong>Custom Drivers</strong>: Third-party network solutions.</li>
</ul>
<h3 id="008-networks--container-to-container-communication">- Container-to-Container Communication<a class="headerlink" href="#008-networks--container-to-container-communication" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Direct IP Access</strong>: Using container IP addresses.</li>
<li><strong>Service Names</strong>: DNS-based service discovery.</li>
<li><strong>Network Aliases</strong>: Multiple names for the same service.</li>
<li><strong>Load Balancing</strong>: Built-in round-robin DNS.</li>
</ul>
<hr />
<h2 id="008-networks-learning-outcomes">Learning Outcomes<a class="headerlink" href="#008-networks-learning-outcomes" title="Permanent link">&para;</a></h2>
<p>After completing this lab, you will understand:</p>
<ul>
<li><strong>Multi-network Architecture</strong>: Design and implement complex network topologies.</li>
<li><strong>Network Segmentation</strong>: Apply security principles through network isolation.</li>
<li><strong>Service Discovery</strong>: Configure and use network aliases effectively.</li>
<li><strong>Cross-network Communication</strong>: Manage service interactions across networks.</li>
<li><strong>Security Boundaries</strong>: Implement DMZ and security zones.</li>
<li><strong>Monitoring Integration</strong>: Set up observability across network segments.</li>
<li><strong>Troubleshooting Networks</strong>: Diagnose and resolve network connectivity issues.</li>
<li><strong>Production Patterns</strong>: Apply enterprise-grade networking practices.</li>
</ul></section></section></div><style>.print-site-enumerate-headings #index > h1:before { content: '1 ' }

                .print-site-enumerate-headings #index h2:before { content: '1.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-reset: counter-index-3 ;  counter-increment: counter-index-2 }
            
                .print-site-enumerate-headings #index h3:before { content: '1.' counter(counter-index-2) '.' counter(counter-index-3) ' ' }
                .print-site-enumerate-headings #index h3 {  counter-increment: counter-index-3 }
            
.print-site-enumerate-headings #section-2 > h1:before { content: '2 ' }
.print-site-enumerate-headings #index > h1:before { content: '2.1 ' }

                .print-site-enumerate-headings #index h2:before { content: '2.1.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-increment: counter-index-2 }
            
.print-site-enumerate-headings #001-intro > h1:before { content: '2.2 ' }

                .print-site-enumerate-headings #001-intro h2:before { content: '2.2.' counter(counter-001-intro-2) ' ' }
                .print-site-enumerate-headings #001-intro h2 {  counter-increment: counter-001-intro-2 }
            
.print-site-enumerate-headings #002-compose-demo > h1:before { content: '2.3 ' }

                .print-site-enumerate-headings #002-compose-demo h2:before { content: '2.3.' counter(counter-002-compose-demo-2) ' ' }
                .print-site-enumerate-headings #002-compose-demo h2 {  counter-increment: counter-002-compose-demo-2 }
            
.print-site-enumerate-headings #003-structure > h1:before { content: '2.4 ' }

                .print-site-enumerate-headings #003-structure h2:before { content: '2.4.' counter(counter-003-structure-2) ' ' }
                .print-site-enumerate-headings #003-structure h2 {  counter-increment: counter-003-structure-2 }
            
.print-site-enumerate-headings #004-commands > h1:before { content: '2.5 ' }

                .print-site-enumerate-headings #004-commands h2:before { content: '2.5.' counter(counter-004-commands-2) ' ' }
                .print-site-enumerate-headings #004-commands h2 {  counter-increment: counter-004-commands-2 }
            
.print-site-enumerate-headings #005-compose-2helm > h1:before { content: '2.6 ' }

                .print-site-enumerate-headings #005-compose-2helm h2:before { content: '2.6.' counter(counter-005-compose-2helm-2) ' ' }
                .print-site-enumerate-headings #005-compose-2helm h2 {  counter-increment: counter-005-compose-2helm-2 }
            
.print-site-enumerate-headings #006-compose-advanced > h1:before { content: '2.7 ' }

                .print-site-enumerate-headings #006-compose-advanced h2:before { content: '2.7.' counter(counter-006-compose-advanced-2) ' ' }
                .print-site-enumerate-headings #006-compose-advanced h2 {  counter-increment: counter-006-compose-advanced-2 }
            
.print-site-enumerate-headings #007-watch > h1:before { content: '2.8 ' }

                .print-site-enumerate-headings #007-watch h2:before { content: '2.8.' counter(counter-007-watch-2) ' ' }
                .print-site-enumerate-headings #007-watch h2 {  counter-increment: counter-007-watch-2 }
            
.print-site-enumerate-headings #008-networks > h1:before { content: '2.9 ' }

                .print-site-enumerate-headings #008-networks h2:before { content: '2.9.' counter(counter-008-networks-2) ' ' }
                .print-site-enumerate-headings #008-networks h2 {  counter-increment: counter-008-networks-2 }
            </style>
<!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->


<!-- Source file information -->





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Footer -->
<footer class="md-footer">
  <div class="logo1"></div>
  <div class="logo2"></div>

  <!-- Link to previous and/or next page -->
  
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Â©2021-2025 Nir Geier<br/><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a>
    </div>
  
  
</div>

      <!-- Social links -->
      
        
<div class="md-social">
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs" target="_blank" rel="noopener" title="View on GitHub"
        class="md-social__link social-class__github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs/network/members" target="_blank" rel="noopener" title="Fork this repo"
        class="md-social__link social-class__fork">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg>
    </a>
    
    
    
    
    
    <a href="https://github.com/Linuman/DockerComposeLabs/stargazers" target="_blank" rel="noopener" title="Star this repo"
        class="md-social__link social-class__star">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener" title="Connect on LinkedIn"
        class="md-social__link social-class__linkedin">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://discord.gg/U6xW23Ss" target="_blank" rel="noopener" title="Follow me on Discord"
        class="md-social__link social-class__discord">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
    
    
    
    
    
    <a href="https://stackoverflow.com/users/1755598/codewizard" target="_blank" rel="noopener" title="Follow me on Stack Overflow"
        class="md-social__link social-class__stackoverflow">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg>
    </a>
    
    
    
    
    
    <a href="https://wa.me/972548122310" target="_blank" rel="noopener" title="Follow me on WhatsApp"
        class="md-social__link social-class__whatsapp">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg>
    </a>
    
    
    
    
    
    <a href="mailto:nirg@codewizard.co.il" target="_blank" rel="noopener" title="Email me"
        class="md-social__link social-class__email">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
    
</div>
      
    </div>
  </div>
</footer>

      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "/DockerComposeLabs/", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", {"navigation.expand": false}, "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
    
  </body>
</html>